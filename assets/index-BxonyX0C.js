(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function s(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(l){if(l.ep)return;l.ep=!0;const o=s(l);fetch(l.href,o)}})();function Ve(n,r){return n==null||r==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function Rh(n,r){return n==null||r==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function ps(n){let r,s,u;n.length!==2?(r=Ve,s=(f,d)=>Ve(n(f),d),u=(f,d)=>n(f)-d):(r=n===Ve||n===Rh?n:Dh,s=n,u=n);function l(f,d,_=0,v=f.length){if(_<v){if(r(d,d)!==0)return v;do{const g=_+v>>>1;s(f[g],d)<0?_=g+1:v=g}while(_<v)}return _}function o(f,d,_=0,v=f.length){if(_<v){if(r(d,d)!==0)return v;do{const g=_+v>>>1;s(f[g],d)<=0?_=g+1:v=g}while(_<v)}return _}function h(f,d,_=0,v=f.length){const g=l(f,d,_,v-1);return g>_&&u(f[g-1],d)>-u(f[g],d)?g-1:g}return{left:l,center:h,right:o}}function Dh(){return 0}function Fh(n){return n===null?NaN:+n}const Hh=ps(Ve),Gh=Hh.right;ps(Fh).center;function ve(n,r){let s,u;if(r===void 0)for(const l of n)l!=null&&(s===void 0?l>=l&&(s=u=l):(s>l&&(s=l),u<l&&(u=l)));else{let l=-1;for(let o of n)(o=r(o,++l,n))!=null&&(s===void 0?o>=o&&(s=u=o):(s>o&&(s=o),u<o&&(u=o)))}return[s,u]}class $i extends Map{constructor(r,s=Wh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),r!=null)for(const[u,l]of r)this.set(u,l)}get(r){return super.get(Ro(this,r))}has(r){return super.has(Ro(this,r))}set(r,s){return super.set($h(this,r),s)}delete(r){return super.delete(Uh(this,r))}}function Ro({_intern:n,_key:r},s){const u=r(s);return n.has(u)?n.get(u):s}function $h({_intern:n,_key:r},s){const u=r(s);return n.has(u)?n.get(u):(n.set(u,s),s)}function Uh({_intern:n,_key:r},s){const u=r(s);return n.has(u)&&(s=n.get(u),n.delete(u)),s}function Wh(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Ui(n){return n}function Un(n,...r){return ms(n,Ui,Ui,r)}function ye(n,r,...s){return ms(n,Ui,r,s)}function ms(n,r,s,u){return function l(o,h){if(h>=u.length)return s(o);const f=new $i,d=u[h++];let _=-1;for(const v of o){const g=d(v,++_,o),p=f.get(g);p?p.push(v):f.set(g,[v])}for(const[v,g]of f)f.set(v,l(g,h));return r(f)}(n,0)}const Vh=Math.sqrt(50),qh=Math.sqrt(10),jh=Math.sqrt(2);function Bn(n,r,s){const u=(r-n)/Math.max(0,s),l=Math.floor(Math.log10(u)),o=u/Math.pow(10,l),h=o>=Vh?10:o>=qh?5:o>=jh?2:1;let f,d,_;return l<0?(_=Math.pow(10,-l)/h,f=Math.round(n*_),d=Math.round(r*_),f/_<n&&++f,d/_>r&&--d,_=-_):(_=Math.pow(10,l)*h,f=Math.round(n/_),d=Math.round(r/_),f*_<n&&++f,d*_>r&&--d),d<f&&.5<=s&&s<2?Bn(n,r,s*2):[f,d,_]}function Xh(n,r,s){if(r=+r,n=+n,s=+s,!(s>0))return[];if(n===r)return[n];const u=r<n,[l,o,h]=u?Bn(r,n,s):Bn(n,r,s);if(!(o>=l))return[];const f=o-l+1,d=new Array(f);if(u)if(h<0)for(let _=0;_<f;++_)d[_]=(o-_)/-h;else for(let _=0;_<f;++_)d[_]=(o-_)*h;else if(h<0)for(let _=0;_<f;++_)d[_]=(l+_)/-h;else for(let _=0;_<f;++_)d[_]=(l+_)*h;return d}function Wi(n,r,s){return r=+r,n=+n,s=+s,Bn(n,r,s)[2]}function Yh(n,r,s){r=+r,n=+n,s=+s;const u=r<n,l=u?Wi(r,n,s):Wi(n,r,s);return(u?-1:1)*(l<0?1/-l:l)}function Vi(n,r){let s;if(r===void 0)for(const u of n)u!=null&&(s<u||s===void 0&&u>=u)&&(s=u);else{let u=-1;for(let l of n)(l=r(l,++u,n))!=null&&(s<l||s===void 0&&l>=l)&&(s=l)}return s}function Kh(n,r){let s;if(r===void 0)for(const u of n)u!=null&&(s>u||s===void 0&&u>=u)&&(s=u);else{let u=-1;for(let l of n)(l=r(l,++u,n))!=null&&(s>l||s===void 0&&l>=l)&&(s=l)}return s}function Jh(n,r,s){n=+n,r=+r,s=(l=arguments.length)<2?(r=n,n=0,1):l<3?1:+s;for(var u=-1,l=Math.max(0,Math.ceil((r-n)/s))|0,o=new Array(l);++u<l;)o[u]=n+u*s;return o}function Qh(n){return n}var Bi=1,zi=2,qi=3,Ge=4,Do=1e-6;function tu(n){return"translate("+n+",0)"}function eu(n){return"translate(0,"+n+")"}function nu(n){return r=>+n(r)}function iu(n,r){return r=Math.max(0,n.bandwidth()-r*2)/2,n.round()&&(r=Math.round(r)),s=>+n(s)+r}function ru(){return!this.__axis}function gs(n,r){var s=[],u=null,l=null,o=6,h=6,f=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=n===Bi||n===Ge?-1:1,v=n===Ge||n===zi?"x":"y",g=n===Bi||n===qi?tu:eu;function p(y){var P=u??(r.ticks?r.ticks.apply(r,s):r.domain()),C=l??(r.tickFormat?r.tickFormat.apply(r,s):Qh),M=Math.max(o,0)+f,T=r.range(),B=+T[0]+d,O=+T[T.length-1]+d,Y=(r.bandwidth?iu:nu)(r.copy(),d),N=y.selection?y.selection():y,V=N.selectAll(".domain").data([null]),rt=N.selectAll(".tick").data(P,r).order(),ht=rt.exit(),Pt=rt.enter().append("g").attr("class","tick"),Q=rt.select("line"),E=rt.select("text");V=V.merge(V.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),rt=rt.merge(Pt),Q=Q.merge(Pt.append("line").attr("stroke","currentColor").attr(v+"2",_*o)),E=E.merge(Pt.append("text").attr("fill","currentColor").attr(v,_*M).attr("dy",n===Bi?"0em":n===qi?"0.71em":"0.32em")),y!==N&&(V=V.transition(y),rt=rt.transition(y),Q=Q.transition(y),E=E.transition(y),ht=ht.transition(y).attr("opacity",Do).attr("transform",function(R){return isFinite(R=Y(R))?g(R+d):this.getAttribute("transform")}),Pt.attr("opacity",Do).attr("transform",function(R){var G=this.parentNode.__axis;return g((G&&isFinite(G=G(R))?G:Y(R))+d)})),ht.remove(),V.attr("d",n===Ge||n===zi?h?"M"+_*h+","+B+"H"+d+"V"+O+"H"+_*h:"M"+d+","+B+"V"+O:h?"M"+B+","+_*h+"V"+d+"H"+O+"V"+_*h:"M"+B+","+d+"H"+O),rt.attr("opacity",1).attr("transform",function(R){return g(Y(R)+d)}),Q.attr(v+"2",_*o),E.attr(v,_*M).text(C),N.filter(ru).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",n===zi?"start":n===Ge?"end":"middle"),N.each(function(){this.__axis=Y})}return p.scale=function(y){return arguments.length?(r=y,p):r},p.ticks=function(){return s=Array.from(arguments),p},p.tickArguments=function(y){return arguments.length?(s=y==null?[]:Array.from(y),p):s.slice()},p.tickValues=function(y){return arguments.length?(u=y==null?null:Array.from(y),p):u&&u.slice()},p.tickFormat=function(y){return arguments.length?(l=y,p):l},p.tickSize=function(y){return arguments.length?(o=h=+y,p):o},p.tickSizeInner=function(y){return arguments.length?(o=+y,p):o},p.tickSizeOuter=function(y){return arguments.length?(h=+y,p):h},p.tickPadding=function(y){return arguments.length?(f=+y,p):f},p.offset=function(y){return arguments.length?(d=+y,p):d},p}function vs(n){return gs(qi,n)}function ys(n){return gs(Ge,n)}var ou={value:()=>{}};function ws(){for(var n=0,r=arguments.length,s={},u;n<r;++n){if(!(u=arguments[n]+"")||u in s||/[\s.]/.test(u))throw new Error("illegal type: "+u);s[u]=[]}return new En(s)}function En(n){this._=n}function su(n,r){return n.trim().split(/^|\s+/).map(function(s){var u="",l=s.indexOf(".");if(l>=0&&(u=s.slice(l+1),s=s.slice(0,l)),s&&!r.hasOwnProperty(s))throw new Error("unknown type: "+s);return{type:s,name:u}})}En.prototype=ws.prototype={constructor:En,on:function(n,r){var s=this._,u=su(n+"",s),l,o=-1,h=u.length;if(arguments.length<2){for(;++o<h;)if((l=(n=u[o]).type)&&(l=au(s[l],n.name)))return l;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++o<h;)if(l=(n=u[o]).type)s[l]=Fo(s[l],n.name,r);else if(r==null)for(l in s)s[l]=Fo(s[l],n.name,null);return this},copy:function(){var n={},r=this._;for(var s in r)n[s]=r[s].slice();return new En(n)},call:function(n,r){if((l=arguments.length-2)>0)for(var s=new Array(l),u=0,l,o;u<l;++u)s[u]=arguments[u+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],u=0,l=o.length;u<l;++u)o[u].value.apply(r,s)},apply:function(n,r,s){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var u=this._[n],l=0,o=u.length;l<o;++l)u[l].value.apply(r,s)}};function au(n,r){for(var s=0,u=n.length,l;s<u;++s)if((l=n[s]).name===r)return l.value}function Fo(n,r,s){for(var u=0,l=n.length;u<l;++u)if(n[u].name===r){n[u]=ou,n=n.slice(0,u).concat(n.slice(u+1));break}return s!=null&&n.push({name:r,value:s}),n}var ji="http://www.w3.org/1999/xhtml";const Ho={svg:"http://www.w3.org/2000/svg",xhtml:ji,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wn(n){var r=n+="",s=r.indexOf(":");return s>=0&&(r=n.slice(0,s))!=="xmlns"&&(n=n.slice(s+1)),Ho.hasOwnProperty(r)?{space:Ho[r],local:n}:n}function hu(n){return function(){var r=this.ownerDocument,s=this.namespaceURI;return s===ji&&r.documentElement.namespaceURI===ji?r.createElement(n):r.createElementNS(s,n)}}function uu(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function rr(n){var r=Wn(n);return(r.local?uu:hu)(r)}function lu(){}function or(n){return n==null?lu:function(){return this.querySelector(n)}}function cu(n){typeof n!="function"&&(n=or(n));for(var r=this._groups,s=r.length,u=new Array(s),l=0;l<s;++l)for(var o=r[l],h=o.length,f=u[l]=new Array(h),d,_,v=0;v<h;++v)(d=o[v])&&(_=n.call(d,d.__data__,v,o))&&("__data__"in d&&(_.__data__=d.__data__),f[v]=_);return new yt(u,this._parents)}function fu(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function du(){return[]}function xs(n){return n==null?du:function(){return this.querySelectorAll(n)}}function _u(n){return function(){return fu(n.apply(this,arguments))}}function pu(n){typeof n=="function"?n=_u(n):n=xs(n);for(var r=this._groups,s=r.length,u=[],l=[],o=0;o<s;++o)for(var h=r[o],f=h.length,d,_=0;_<f;++_)(d=h[_])&&(u.push(n.call(d,d.__data__,_,h)),l.push(d));return new yt(u,l)}function Ls(n){return function(){return this.matches(n)}}function Ps(n){return function(r){return r.matches(n)}}var mu=Array.prototype.find;function gu(n){return function(){return mu.call(this.children,n)}}function vu(){return this.firstElementChild}function yu(n){return this.select(n==null?vu:gu(typeof n=="function"?n:Ps(n)))}var wu=Array.prototype.filter;function xu(){return Array.from(this.children)}function Lu(n){return function(){return wu.call(this.children,n)}}function Pu(n){return this.selectAll(n==null?xu:Lu(typeof n=="function"?n:Ps(n)))}function bu(n){typeof n!="function"&&(n=Ls(n));for(var r=this._groups,s=r.length,u=new Array(s),l=0;l<s;++l)for(var o=r[l],h=o.length,f=u[l]=[],d,_=0;_<h;++_)(d=o[_])&&n.call(d,d.__data__,_,o)&&f.push(d);return new yt(u,this._parents)}function bs(n){return new Array(n.length)}function Cu(){return new yt(this._enter||this._groups.map(bs),this._parents)}function zn(n,r){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=r}zn.prototype={constructor:zn,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,r){return this._parent.insertBefore(n,r)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function ku(n){return function(){return n}}function Mu(n,r,s,u,l,o){for(var h=0,f,d=r.length,_=o.length;h<_;++h)(f=r[h])?(f.__data__=o[h],u[h]=f):s[h]=new zn(n,o[h]);for(;h<d;++h)(f=r[h])&&(l[h]=f)}function Tu(n,r,s,u,l,o,h){var f,d,_=new Map,v=r.length,g=o.length,p=new Array(v),y;for(f=0;f<v;++f)(d=r[f])&&(p[f]=y=h.call(d,d.__data__,f,r)+"",_.has(y)?l[f]=d:_.set(y,d));for(f=0;f<g;++f)y=h.call(n,o[f],f,o)+"",(d=_.get(y))?(u[f]=d,d.__data__=o[f],_.delete(y)):s[f]=new zn(n,o[f]);for(f=0;f<v;++f)(d=r[f])&&_.get(p[f])===d&&(l[f]=d)}function Su(n){return n.__data__}function Eu(n,r){if(!arguments.length)return Array.from(this,Su);var s=r?Tu:Mu,u=this._parents,l=this._groups;typeof n!="function"&&(n=ku(n));for(var o=l.length,h=new Array(o),f=new Array(o),d=new Array(o),_=0;_<o;++_){var v=u[_],g=l[_],p=g.length,y=Au(n.call(v,v&&v.__data__,_,u)),P=y.length,C=f[_]=new Array(P),M=h[_]=new Array(P),T=d[_]=new Array(p);s(v,g,C,M,T,y,r);for(var B=0,O=0,Y,N;B<P;++B)if(Y=C[B]){for(B>=O&&(O=B+1);!(N=M[O])&&++O<P;);Y._next=N||null}}return h=new yt(h,u),h._enter=f,h._exit=d,h}function Au(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Ou(){return new yt(this._exit||this._groups.map(bs),this._parents)}function Bu(n,r,s){var u=this.enter(),l=this,o=this.exit();return typeof n=="function"?(u=n(u),u&&(u=u.selection())):u=u.append(n+""),r!=null&&(l=r(l),l&&(l=l.selection())),s==null?o.remove():s(o),u&&l?u.merge(l).order():l}function zu(n){for(var r=n.selection?n.selection():n,s=this._groups,u=r._groups,l=s.length,o=u.length,h=Math.min(l,o),f=new Array(l),d=0;d<h;++d)for(var _=s[d],v=u[d],g=_.length,p=f[d]=new Array(g),y,P=0;P<g;++P)(y=_[P]||v[P])&&(p[P]=y);for(;d<l;++d)f[d]=s[d];return new yt(f,this._parents)}function Iu(){for(var n=this._groups,r=-1,s=n.length;++r<s;)for(var u=n[r],l=u.length-1,o=u[l],h;--l>=0;)(h=u[l])&&(o&&h.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(h,o),o=h);return this}function Nu(n){n||(n=Zu);function r(g,p){return g&&p?n(g.__data__,p.__data__):!g-!p}for(var s=this._groups,u=s.length,l=new Array(u),o=0;o<u;++o){for(var h=s[o],f=h.length,d=l[o]=new Array(f),_,v=0;v<f;++v)(_=h[v])&&(d[v]=_);d.sort(r)}return new yt(l,this._parents).order()}function Zu(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function Ru(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Du(){return Array.from(this)}function Fu(){for(var n=this._groups,r=0,s=n.length;r<s;++r)for(var u=n[r],l=0,o=u.length;l<o;++l){var h=u[l];if(h)return h}return null}function Hu(){let n=0;for(const r of this)++n;return n}function Gu(){return!this.node()}function $u(n){for(var r=this._groups,s=0,u=r.length;s<u;++s)for(var l=r[s],o=0,h=l.length,f;o<h;++o)(f=l[o])&&n.call(f,f.__data__,o,l);return this}function Uu(n){return function(){this.removeAttribute(n)}}function Wu(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Vu(n,r){return function(){this.setAttribute(n,r)}}function qu(n,r){return function(){this.setAttributeNS(n.space,n.local,r)}}function ju(n,r){return function(){var s=r.apply(this,arguments);s==null?this.removeAttribute(n):this.setAttribute(n,s)}}function Xu(n,r){return function(){var s=r.apply(this,arguments);s==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,s)}}function Yu(n,r){var s=Wn(n);if(arguments.length<2){var u=this.node();return s.local?u.getAttributeNS(s.space,s.local):u.getAttribute(s)}return this.each((r==null?s.local?Wu:Uu:typeof r=="function"?s.local?Xu:ju:s.local?qu:Vu)(s,r))}function Cs(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function Ku(n){return function(){this.style.removeProperty(n)}}function Ju(n,r,s){return function(){this.style.setProperty(n,r,s)}}function Qu(n,r,s){return function(){var u=r.apply(this,arguments);u==null?this.style.removeProperty(n):this.style.setProperty(n,u,s)}}function tl(n,r,s){return arguments.length>1?this.each((r==null?Ku:typeof r=="function"?Qu:Ju)(n,r,s??"")):we(this.node(),n)}function we(n,r){return n.style.getPropertyValue(r)||Cs(n).getComputedStyle(n,null).getPropertyValue(r)}function el(n){return function(){delete this[n]}}function nl(n,r){return function(){this[n]=r}}function il(n,r){return function(){var s=r.apply(this,arguments);s==null?delete this[n]:this[n]=s}}function rl(n,r){return arguments.length>1?this.each((r==null?el:typeof r=="function"?il:nl)(n,r)):this.node()[n]}function ks(n){return n.trim().split(/^|\s+/)}function sr(n){return n.classList||new Ms(n)}function Ms(n){this._node=n,this._names=ks(n.getAttribute("class")||"")}Ms.prototype={add:function(n){var r=this._names.indexOf(n);r<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var r=this._names.indexOf(n);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Ts(n,r){for(var s=sr(n),u=-1,l=r.length;++u<l;)s.add(r[u])}function Ss(n,r){for(var s=sr(n),u=-1,l=r.length;++u<l;)s.remove(r[u])}function ol(n){return function(){Ts(this,n)}}function sl(n){return function(){Ss(this,n)}}function al(n,r){return function(){(r.apply(this,arguments)?Ts:Ss)(this,n)}}function hl(n,r){var s=ks(n+"");if(arguments.length<2){for(var u=sr(this.node()),l=-1,o=s.length;++l<o;)if(!u.contains(s[l]))return!1;return!0}return this.each((typeof r=="function"?al:r?ol:sl)(s,r))}function ul(){this.textContent=""}function ll(n){return function(){this.textContent=n}}function cl(n){return function(){var r=n.apply(this,arguments);this.textContent=r??""}}function fl(n){return arguments.length?this.each(n==null?ul:(typeof n=="function"?cl:ll)(n)):this.node().textContent}function dl(){this.innerHTML=""}function _l(n){return function(){this.innerHTML=n}}function pl(n){return function(){var r=n.apply(this,arguments);this.innerHTML=r??""}}function ml(n){return arguments.length?this.each(n==null?dl:(typeof n=="function"?pl:_l)(n)):this.node().innerHTML}function gl(){this.nextSibling&&this.parentNode.appendChild(this)}function vl(){return this.each(gl)}function yl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wl(){return this.each(yl)}function xl(n){var r=typeof n=="function"?n:rr(n);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Ll(){return null}function Pl(n,r){var s=typeof n=="function"?n:rr(n),u=r==null?Ll:typeof r=="function"?r:or(r);return this.select(function(){return this.insertBefore(s.apply(this,arguments),u.apply(this,arguments)||null)})}function bl(){var n=this.parentNode;n&&n.removeChild(this)}function Cl(){return this.each(bl)}function kl(){var n=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function Ml(){var n=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(n,this.nextSibling):n}function Tl(n){return this.select(n?Ml:kl)}function Sl(n){return arguments.length?this.property("__data__",n):this.node().__data__}function El(n){return function(r){n.call(this,r,this.__data__)}}function Al(n){return n.trim().split(/^|\s+/).map(function(r){var s="",u=r.indexOf(".");return u>=0&&(s=r.slice(u+1),r=r.slice(0,u)),{type:r,name:s}})}function Ol(n){return function(){var r=this.__on;if(r){for(var s=0,u=-1,l=r.length,o;s<l;++s)o=r[s],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):r[++u]=o;++u?r.length=u:delete this.__on}}}function Bl(n,r,s){return function(){var u=this.__on,l,o=El(r);if(u){for(var h=0,f=u.length;h<f;++h)if((l=u[h]).type===n.type&&l.name===n.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=o,l.options=s),l.value=r;return}}this.addEventListener(n.type,o,s),l={type:n.type,name:n.name,value:r,listener:o,options:s},u?u.push(l):this.__on=[l]}}function zl(n,r,s){var u=Al(n+""),l,o=u.length,h;if(arguments.length<2){var f=this.node().__on;if(f){for(var d=0,_=f.length,v;d<_;++d)for(l=0,v=f[d];l<o;++l)if((h=u[l]).type===v.type&&h.name===v.name)return v.value}return}for(f=r?Bl:Ol,l=0;l<o;++l)this.each(f(u[l],r,s));return this}function Es(n,r,s){var u=Cs(n),l=u.CustomEvent;typeof l=="function"?l=new l(r,s):(l=u.document.createEvent("Event"),s?(l.initEvent(r,s.bubbles,s.cancelable),l.detail=s.detail):l.initEvent(r,!1,!1)),n.dispatchEvent(l)}function Il(n,r){return function(){return Es(this,n,r)}}function Nl(n,r){return function(){return Es(this,n,r.apply(this,arguments))}}function Zl(n,r){return this.each((typeof r=="function"?Nl:Il)(n,r))}function*Rl(){for(var n=this._groups,r=0,s=n.length;r<s;++r)for(var u=n[r],l=0,o=u.length,h;l<o;++l)(h=u[l])&&(yield h)}var As=[null];function yt(n,r){this._groups=n,this._parents=r}function tn(){return new yt([[document.documentElement]],As)}function Dl(){return this}yt.prototype=tn.prototype={constructor:yt,select:cu,selectAll:pu,selectChild:yu,selectChildren:Pu,filter:bu,data:Eu,enter:Cu,exit:Ou,join:Bu,merge:zu,selection:Dl,order:Iu,sort:Nu,call:Ru,nodes:Du,node:Fu,size:Hu,empty:Gu,each:$u,attr:Yu,style:tl,property:rl,classed:hl,text:fl,html:ml,raise:vl,lower:wl,append:xl,insert:Pl,remove:Cl,clone:Tl,datum:Sl,on:zl,dispatch:Zl,[Symbol.iterator]:Rl};function X(n){return typeof n=="string"?new yt([[document.querySelector(n)]],[document.documentElement]):new yt([[n]],As)}function Fl(n){return X(rr(n).call(document.documentElement))}function ar(n,r,s){n.prototype=r.prototype=s,s.constructor=n}function Os(n,r){var s=Object.create(n.prototype);for(var u in r)s[u]=r[u];return s}function en(){}var je=.7,In=1/je,ge="\\s*([+-]?\\d+)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hl=/^#([0-9a-f]{3,8})$/,Gl=new RegExp(`^rgb\\(${ge},${ge},${ge}\\)$`),$l=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Ul=new RegExp(`^rgba\\(${ge},${ge},${ge},${Xe}\\)$`),Wl=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${Xe}\\)$`),Vl=new RegExp(`^hsl\\(${Xe},${Nt},${Nt}\\)$`),ql=new RegExp(`^hsla\\(${Xe},${Nt},${Nt},${Xe}\\)$`),Go={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ar(en,re,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:$o,formatHex:$o,formatHex8:jl,formatHsl:Xl,formatRgb:Uo,toString:Uo});function $o(){return this.rgb().formatHex()}function jl(){return this.rgb().formatHex8()}function Xl(){return Bs(this).formatHsl()}function Uo(){return this.rgb().formatRgb()}function re(n){var r,s;return n=(n+"").trim().toLowerCase(),(r=Hl.exec(n))?(s=r[1].length,r=parseInt(r[1],16),s===6?Wo(r):s===3?new vt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):s===8?Pn(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):s===4?Pn(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Gl.exec(n))?new vt(r[1],r[2],r[3],1):(r=$l.exec(n))?new vt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Ul.exec(n))?Pn(r[1],r[2],r[3],r[4]):(r=Wl.exec(n))?Pn(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Vl.exec(n))?jo(r[1],r[2]/100,r[3]/100,1):(r=ql.exec(n))?jo(r[1],r[2]/100,r[3]/100,r[4]):Go.hasOwnProperty(n)?Wo(Go[n]):n==="transparent"?new vt(NaN,NaN,NaN,0):null}function Wo(n){return new vt(n>>16&255,n>>8&255,n&255,1)}function Pn(n,r,s,u){return u<=0&&(n=r=s=NaN),new vt(n,r,s,u)}function Yl(n){return n instanceof en||(n=re(n)),n?(n=n.rgb(),new vt(n.r,n.g,n.b,n.opacity)):new vt}function Xi(n,r,s,u){return arguments.length===1?Yl(n):new vt(n,r,s,u??1)}function vt(n,r,s,u){this.r=+n,this.g=+r,this.b=+s,this.opacity=+u}ar(vt,Xi,Os(en,{brighter(n){return n=n==null?In:Math.pow(In,n),new vt(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?je:Math.pow(je,n),new vt(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new vt(ie(this.r),ie(this.g),ie(this.b),Nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vo,formatHex:Vo,formatHex8:Kl,formatRgb:qo,toString:qo}));function Vo(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}`}function Kl(){return`#${ne(this.r)}${ne(this.g)}${ne(this.b)}${ne((isNaN(this.opacity)?1:this.opacity)*255)}`}function qo(){const n=Nn(this.opacity);return`${n===1?"rgb(":"rgba("}${ie(this.r)}, ${ie(this.g)}, ${ie(this.b)}${n===1?")":`, ${n})`}`}function Nn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ie(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ne(n){return n=ie(n),(n<16?"0":"")+n.toString(16)}function jo(n,r,s,u){return u<=0?n=r=s=NaN:s<=0||s>=1?n=r=NaN:r<=0&&(n=NaN),new Tt(n,r,s,u)}function Bs(n){if(n instanceof Tt)return new Tt(n.h,n.s,n.l,n.opacity);if(n instanceof en||(n=re(n)),!n)return new Tt;if(n instanceof Tt)return n;n=n.rgb();var r=n.r/255,s=n.g/255,u=n.b/255,l=Math.min(r,s,u),o=Math.max(r,s,u),h=NaN,f=o-l,d=(o+l)/2;return f?(r===o?h=(s-u)/f+(s<u)*6:s===o?h=(u-r)/f+2:h=(r-s)/f+4,f/=d<.5?o+l:2-o-l,h*=60):f=d>0&&d<1?0:h,new Tt(h,f,d,n.opacity)}function Jl(n,r,s,u){return arguments.length===1?Bs(n):new Tt(n,r,s,u??1)}function Tt(n,r,s,u){this.h=+n,this.s=+r,this.l=+s,this.opacity=+u}ar(Tt,Jl,Os(en,{brighter(n){return n=n==null?In:Math.pow(In,n),new Tt(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?je:Math.pow(je,n),new Tt(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,r=isNaN(n)||isNaN(this.s)?0:this.s,s=this.l,u=s+(s<.5?s:1-s)*r,l=2*s-u;return new vt(Ii(n>=240?n-240:n+120,l,u),Ii(n,l,u),Ii(n<120?n+240:n-120,l,u),this.opacity)},clamp(){return new Tt(Xo(this.h),bn(this.s),bn(this.l),Nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Nn(this.opacity);return`${n===1?"hsl(":"hsla("}${Xo(this.h)}, ${bn(this.s)*100}%, ${bn(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Xo(n){return n=(n||0)%360,n<0?n+360:n}function bn(n){return Math.max(0,Math.min(1,n||0))}function Ii(n,r,s){return(n<60?r+(s-r)*n/60:n<180?s:n<240?r+(s-r)*(240-n)/60:r)*255}const hr=n=>()=>n;function Ql(n,r){return function(s){return n+s*r}}function tc(n,r,s){return n=Math.pow(n,s),r=Math.pow(r,s)-n,s=1/s,function(u){return Math.pow(n+u*r,s)}}function ec(n){return(n=+n)==1?zs:function(r,s){return s-r?tc(r,s,n):hr(isNaN(r)?s:r)}}function zs(n,r){var s=r-n;return s?Ql(n,s):hr(isNaN(n)?r:n)}const Ye=function n(r){var s=ec(r);function u(l,o){var h=s((l=Xi(l)).r,(o=Xi(o)).r),f=s(l.g,o.g),d=s(l.b,o.b),_=zs(l.opacity,o.opacity);return function(v){return l.r=h(v),l.g=f(v),l.b=d(v),l.opacity=_(v),l+""}}return u.gamma=n,u}(1);function nc(n,r){r||(r=[]);var s=n?Math.min(r.length,n.length):0,u=r.slice(),l;return function(o){for(l=0;l<s;++l)u[l]=n[l]*(1-o)+r[l]*o;return u}}function ic(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function rc(n,r){var s=r?r.length:0,u=n?Math.min(s,n.length):0,l=new Array(u),o=new Array(s),h;for(h=0;h<u;++h)l[h]=ur(n[h],r[h]);for(;h<s;++h)o[h]=r[h];return function(f){for(h=0;h<u;++h)o[h]=l[h](f);return o}}function oc(n,r){var s=new Date;return n=+n,r=+r,function(u){return s.setTime(n*(1-u)+r*u),s}}function Mt(n,r){return n=+n,r=+r,function(s){return n*(1-s)+r*s}}function sc(n,r){var s={},u={},l;(n===null||typeof n!="object")&&(n={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in n?s[l]=ur(n[l],r[l]):u[l]=r[l];return function(o){for(l in s)u[l]=s[l](o);return u}}var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ni=new RegExp(Yi.source,"g");function ac(n){return function(){return n}}function hc(n){return function(r){return n(r)+""}}function Is(n,r){var s=Yi.lastIndex=Ni.lastIndex=0,u,l,o,h=-1,f=[],d=[];for(n=n+"",r=r+"";(u=Yi.exec(n))&&(l=Ni.exec(r));)(o=l.index)>s&&(o=r.slice(s,o),f[h]?f[h]+=o:f[++h]=o),(u=u[0])===(l=l[0])?f[h]?f[h]+=l:f[++h]=l:(f[++h]=null,d.push({i:h,x:Mt(u,l)})),s=Ni.lastIndex;return s<r.length&&(o=r.slice(s),f[h]?f[h]+=o:f[++h]=o),f.length<2?d[0]?hc(d[0].x):ac(r):(r=d.length,function(_){for(var v=0,g;v<r;++v)f[(g=d[v]).i]=g.x(_);return f.join("")})}function ur(n,r){var s=typeof r,u;return r==null||s==="boolean"?hr(r):(s==="number"?Mt:s==="string"?(u=re(r))?(r=u,Ye):Is:r instanceof re?Ye:r instanceof Date?oc:ic(r)?nc:Array.isArray(r)?rc:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?sc:Mt)(n,r)}function uc(n,r){return n=+n,r=+r,function(s){return Math.round(n*(1-s)+r*s)}}var Yo=180/Math.PI,Ki={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ns(n,r,s,u,l,o){var h,f,d;return(h=Math.sqrt(n*n+r*r))&&(n/=h,r/=h),(d=n*s+r*u)&&(s-=n*d,u-=r*d),(f=Math.sqrt(s*s+u*u))&&(s/=f,u/=f,d/=f),n*u<r*s&&(n=-n,r=-r,d=-d,h=-h),{translateX:l,translateY:o,rotate:Math.atan2(r,n)*Yo,skewX:Math.atan(d)*Yo,scaleX:h,scaleY:f}}var Cn;function lc(n){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return r.isIdentity?Ki:Ns(r.a,r.b,r.c,r.d,r.e,r.f)}function cc(n){return n==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",n),!(n=Cn.transform.baseVal.consolidate()))?Ki:(n=n.matrix,Ns(n.a,n.b,n.c,n.d,n.e,n.f))}function Zs(n,r,s,u){function l(_){return _.length?_.pop()+" ":""}function o(_,v,g,p,y,P){if(_!==g||v!==p){var C=y.push("translate(",null,r,null,s);P.push({i:C-4,x:Mt(_,g)},{i:C-2,x:Mt(v,p)})}else(g||p)&&y.push("translate("+g+r+p+s)}function h(_,v,g,p){_!==v?(_-v>180?v+=360:v-_>180&&(_+=360),p.push({i:g.push(l(g)+"rotate(",null,u)-2,x:Mt(_,v)})):v&&g.push(l(g)+"rotate("+v+u)}function f(_,v,g,p){_!==v?p.push({i:g.push(l(g)+"skewX(",null,u)-2,x:Mt(_,v)}):v&&g.push(l(g)+"skewX("+v+u)}function d(_,v,g,p,y,P){if(_!==g||v!==p){var C=y.push(l(y)+"scale(",null,",",null,")");P.push({i:C-4,x:Mt(_,g)},{i:C-2,x:Mt(v,p)})}else(g!==1||p!==1)&&y.push(l(y)+"scale("+g+","+p+")")}return function(_,v){var g=[],p=[];return _=n(_),v=n(v),o(_.translateX,_.translateY,v.translateX,v.translateY,g,p),h(_.rotate,v.rotate,g,p),f(_.skewX,v.skewX,g,p),d(_.scaleX,_.scaleY,v.scaleX,v.scaleY,g,p),_=v=null,function(y){for(var P=-1,C=p.length,M;++P<C;)g[(M=p[P]).i]=M.x(y);return g.join("")}}}var fc=Zs(lc,"px, ","px)","deg)"),dc=Zs(cc,", ",")",")"),xe=0,$e=0,Re=0,Rs=1e3,Zn,Ue,Rn=0,oe=0,Vn=0,Ke=typeof performance=="object"&&performance.now?performance:Date,Ds=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function lr(){return oe||(Ds(_c),oe=Ke.now()+Vn)}function _c(){oe=0}function Dn(){this._call=this._time=this._next=null}Dn.prototype=Fs.prototype={constructor:Dn,restart:function(n,r,s){if(typeof n!="function")throw new TypeError("callback is not a function");s=(s==null?lr():+s)+(r==null?0:+r),!this._next&&Ue!==this&&(Ue?Ue._next=this:Zn=this,Ue=this),this._call=n,this._time=s,Ji()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ji())}};function Fs(n,r,s){var u=new Dn;return u.restart(n,r,s),u}function pc(){lr(),++xe;for(var n=Zn,r;n;)(r=oe-n._time)>=0&&n._call.call(void 0,r),n=n._next;--xe}function Ko(){oe=(Rn=Ke.now())+Vn,xe=$e=0;try{pc()}finally{xe=0,gc(),oe=0}}function mc(){var n=Ke.now(),r=n-Rn;r>Rs&&(Vn-=r,Rn=n)}function gc(){for(var n,r=Zn,s,u=1/0;r;)r._call?(u>r._time&&(u=r._time),n=r,r=r._next):(s=r._next,r._next=null,r=n?n._next=s:Zn=s);Ue=n,Ji(u)}function Ji(n){if(!xe){$e&&($e=clearTimeout($e));var r=n-oe;r>24?(n<1/0&&($e=setTimeout(Ko,n-Ke.now()-Vn)),Re&&(Re=clearInterval(Re))):(Re||(Rn=Ke.now(),Re=setInterval(mc,Rs)),xe=1,Ds(Ko))}}function Jo(n,r,s){var u=new Dn;return r=r==null?0:+r,u.restart(l=>{u.stop(),n(l+r)},r,s),u}var vc=ws("start","end","cancel","interrupt"),yc=[],Hs=0,Qo=1,Qi=2,An=3,ts=4,tr=5,On=6;function qn(n,r,s,u,l,o){var h=n.__transition;if(!h)n.__transition={};else if(s in h)return;wc(n,s,{name:r,index:u,group:l,on:vc,tween:yc,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Hs})}function cr(n,r){var s=St(n,r);if(s.state>Hs)throw new Error("too late; already scheduled");return s}function Zt(n,r){var s=St(n,r);if(s.state>An)throw new Error("too late; already running");return s}function St(n,r){var s=n.__transition;if(!s||!(s=s[r]))throw new Error("transition not found");return s}function wc(n,r,s){var u=n.__transition,l;u[r]=s,s.timer=Fs(o,0,s.time);function o(_){s.state=Qo,s.timer.restart(h,s.delay,s.time),s.delay<=_&&h(_-s.delay)}function h(_){var v,g,p,y;if(s.state!==Qo)return d();for(v in u)if(y=u[v],y.name===s.name){if(y.state===An)return Jo(h);y.state===ts?(y.state=On,y.timer.stop(),y.on.call("interrupt",n,n.__data__,y.index,y.group),delete u[v]):+v<r&&(y.state=On,y.timer.stop(),y.on.call("cancel",n,n.__data__,y.index,y.group),delete u[v])}if(Jo(function(){s.state===An&&(s.state=ts,s.timer.restart(f,s.delay,s.time),f(_))}),s.state=Qi,s.on.call("start",n,n.__data__,s.index,s.group),s.state===Qi){for(s.state=An,l=new Array(p=s.tween.length),v=0,g=-1;v<p;++v)(y=s.tween[v].value.call(n,n.__data__,s.index,s.group))&&(l[++g]=y);l.length=g+1}}function f(_){for(var v=_<s.duration?s.ease.call(null,_/s.duration):(s.timer.restart(d),s.state=tr,1),g=-1,p=l.length;++g<p;)l[g].call(n,v);s.state===tr&&(s.on.call("end",n,n.__data__,s.index,s.group),d())}function d(){s.state=On,s.timer.stop(),delete u[r];for(var _ in u)return;delete n.__transition}}function xc(n,r){var s=n.__transition,u,l,o=!0,h;if(s){r=r==null?null:r+"";for(h in s){if((u=s[h]).name!==r){o=!1;continue}l=u.state>Qi&&u.state<tr,u.state=On,u.timer.stop(),u.on.call(l?"interrupt":"cancel",n,n.__data__,u.index,u.group),delete s[h]}o&&delete n.__transition}}function Lc(n){return this.each(function(){xc(this,n)})}function Pc(n,r){var s,u;return function(){var l=Zt(this,n),o=l.tween;if(o!==s){u=s=o;for(var h=0,f=u.length;h<f;++h)if(u[h].name===r){u=u.slice(),u.splice(h,1);break}}l.tween=u}}function bc(n,r,s){var u,l;if(typeof s!="function")throw new Error;return function(){var o=Zt(this,n),h=o.tween;if(h!==u){l=(u=h).slice();for(var f={name:r,value:s},d=0,_=l.length;d<_;++d)if(l[d].name===r){l[d]=f;break}d===_&&l.push(f)}o.tween=l}}function Cc(n,r){var s=this._id;if(n+="",arguments.length<2){for(var u=St(this.node(),s).tween,l=0,o=u.length,h;l<o;++l)if((h=u[l]).name===n)return h.value;return null}return this.each((r==null?Pc:bc)(s,n,r))}function fr(n,r,s){var u=n._id;return n.each(function(){var l=Zt(this,u);(l.value||(l.value={}))[r]=s.apply(this,arguments)}),function(l){return St(l,u).value[r]}}function Gs(n,r){var s;return(typeof r=="number"?Mt:r instanceof re?Ye:(s=re(r))?(r=s,Ye):Is)(n,r)}function kc(n){return function(){this.removeAttribute(n)}}function Mc(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Tc(n,r,s){var u,l=s+"",o;return function(){var h=this.getAttribute(n);return h===l?null:h===u?o:o=r(u=h,s)}}function Sc(n,r,s){var u,l=s+"",o;return function(){var h=this.getAttributeNS(n.space,n.local);return h===l?null:h===u?o:o=r(u=h,s)}}function Ec(n,r,s){var u,l,o;return function(){var h,f=s(this),d;return f==null?void this.removeAttribute(n):(h=this.getAttribute(n),d=f+"",h===d?null:h===u&&d===l?o:(l=d,o=r(u=h,f)))}}function Ac(n,r,s){var u,l,o;return function(){var h,f=s(this),d;return f==null?void this.removeAttributeNS(n.space,n.local):(h=this.getAttributeNS(n.space,n.local),d=f+"",h===d?null:h===u&&d===l?o:(l=d,o=r(u=h,f)))}}function Oc(n,r){var s=Wn(n),u=s==="transform"?dc:Gs;return this.attrTween(n,typeof r=="function"?(s.local?Ac:Ec)(s,u,fr(this,"attr."+n,r)):r==null?(s.local?Mc:kc)(s):(s.local?Sc:Tc)(s,u,r))}function Bc(n,r){return function(s){this.setAttribute(n,r.call(this,s))}}function zc(n,r){return function(s){this.setAttributeNS(n.space,n.local,r.call(this,s))}}function Ic(n,r){var s,u;function l(){var o=r.apply(this,arguments);return o!==u&&(s=(u=o)&&zc(n,o)),s}return l._value=r,l}function Nc(n,r){var s,u;function l(){var o=r.apply(this,arguments);return o!==u&&(s=(u=o)&&Bc(n,o)),s}return l._value=r,l}function Zc(n,r){var s="attr."+n;if(arguments.length<2)return(s=this.tween(s))&&s._value;if(r==null)return this.tween(s,null);if(typeof r!="function")throw new Error;var u=Wn(n);return this.tween(s,(u.local?Ic:Nc)(u,r))}function Rc(n,r){return function(){cr(this,n).delay=+r.apply(this,arguments)}}function Dc(n,r){return r=+r,function(){cr(this,n).delay=r}}function Fc(n){var r=this._id;return arguments.length?this.each((typeof n=="function"?Rc:Dc)(r,n)):St(this.node(),r).delay}function Hc(n,r){return function(){Zt(this,n).duration=+r.apply(this,arguments)}}function Gc(n,r){return r=+r,function(){Zt(this,n).duration=r}}function $c(n){var r=this._id;return arguments.length?this.each((typeof n=="function"?Hc:Gc)(r,n)):St(this.node(),r).duration}function Uc(n,r){if(typeof r!="function")throw new Error;return function(){Zt(this,n).ease=r}}function Wc(n){var r=this._id;return arguments.length?this.each(Uc(r,n)):St(this.node(),r).ease}function Vc(n,r){return function(){var s=r.apply(this,arguments);if(typeof s!="function")throw new Error;Zt(this,n).ease=s}}function qc(n){if(typeof n!="function")throw new Error;return this.each(Vc(this._id,n))}function jc(n){typeof n!="function"&&(n=Ls(n));for(var r=this._groups,s=r.length,u=new Array(s),l=0;l<s;++l)for(var o=r[l],h=o.length,f=u[l]=[],d,_=0;_<h;++_)(d=o[_])&&n.call(d,d.__data__,_,o)&&f.push(d);return new Ut(u,this._parents,this._name,this._id)}function Xc(n){if(n._id!==this._id)throw new Error;for(var r=this._groups,s=n._groups,u=r.length,l=s.length,o=Math.min(u,l),h=new Array(u),f=0;f<o;++f)for(var d=r[f],_=s[f],v=d.length,g=h[f]=new Array(v),p,y=0;y<v;++y)(p=d[y]||_[y])&&(g[y]=p);for(;f<u;++f)h[f]=r[f];return new Ut(h,this._parents,this._name,this._id)}function Yc(n){return(n+"").trim().split(/^|\s+/).every(function(r){var s=r.indexOf(".");return s>=0&&(r=r.slice(0,s)),!r||r==="start"})}function Kc(n,r,s){var u,l,o=Yc(r)?cr:Zt;return function(){var h=o(this,n),f=h.on;f!==u&&(l=(u=f).copy()).on(r,s),h.on=l}}function Jc(n,r){var s=this._id;return arguments.length<2?St(this.node(),s).on.on(n):this.each(Kc(s,n,r))}function Qc(n){return function(){var r=this.parentNode;for(var s in this.__transition)if(+s!==n)return;r&&r.removeChild(this)}}function tf(){return this.on("end.remove",Qc(this._id))}function ef(n){var r=this._name,s=this._id;typeof n!="function"&&(n=or(n));for(var u=this._groups,l=u.length,o=new Array(l),h=0;h<l;++h)for(var f=u[h],d=f.length,_=o[h]=new Array(d),v,g,p=0;p<d;++p)(v=f[p])&&(g=n.call(v,v.__data__,p,f))&&("__data__"in v&&(g.__data__=v.__data__),_[p]=g,qn(_[p],r,s,p,_,St(v,s)));return new Ut(o,this._parents,r,s)}function nf(n){var r=this._name,s=this._id;typeof n!="function"&&(n=xs(n));for(var u=this._groups,l=u.length,o=[],h=[],f=0;f<l;++f)for(var d=u[f],_=d.length,v,g=0;g<_;++g)if(v=d[g]){for(var p=n.call(v,v.__data__,g,d),y,P=St(v,s),C=0,M=p.length;C<M;++C)(y=p[C])&&qn(y,r,s,C,p,P);o.push(p),h.push(v)}return new Ut(o,h,r,s)}var rf=tn.prototype.constructor;function of(){return new rf(this._groups,this._parents)}function sf(n,r){var s,u,l;return function(){var o=we(this,n),h=(this.style.removeProperty(n),we(this,n));return o===h?null:o===s&&h===u?l:l=r(s=o,u=h)}}function $s(n){return function(){this.style.removeProperty(n)}}function af(n,r,s){var u,l=s+"",o;return function(){var h=we(this,n);return h===l?null:h===u?o:o=r(u=h,s)}}function hf(n,r,s){var u,l,o;return function(){var h=we(this,n),f=s(this),d=f+"";return f==null&&(d=f=(this.style.removeProperty(n),we(this,n))),h===d?null:h===u&&d===l?o:(l=d,o=r(u=h,f))}}function uf(n,r){var s,u,l,o="style."+r,h="end."+o,f;return function(){var d=Zt(this,n),_=d.on,v=d.value[o]==null?f||(f=$s(r)):void 0;(_!==s||l!==v)&&(u=(s=_).copy()).on(h,l=v),d.on=u}}function lf(n,r,s){var u=(n+="")=="transform"?fc:Gs;return r==null?this.styleTween(n,sf(n,u)).on("end.style."+n,$s(n)):typeof r=="function"?this.styleTween(n,hf(n,u,fr(this,"style."+n,r))).each(uf(this._id,n)):this.styleTween(n,af(n,u,r),s).on("end.style."+n,null)}function cf(n,r,s){return function(u){this.style.setProperty(n,r.call(this,u),s)}}function ff(n,r,s){var u,l;function o(){var h=r.apply(this,arguments);return h!==l&&(u=(l=h)&&cf(n,h,s)),u}return o._value=r,o}function df(n,r,s){var u="style."+(n+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(r==null)return this.tween(u,null);if(typeof r!="function")throw new Error;return this.tween(u,ff(n,r,s??""))}function _f(n){return function(){this.textContent=n}}function pf(n){return function(){var r=n(this);this.textContent=r??""}}function mf(n){return this.tween("text",typeof n=="function"?pf(fr(this,"text",n)):_f(n==null?"":n+""))}function gf(n){return function(r){this.textContent=n.call(this,r)}}function vf(n){var r,s;function u(){var l=n.apply(this,arguments);return l!==s&&(r=(s=l)&&gf(l)),r}return u._value=n,u}function yf(n){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,vf(n))}function wf(){for(var n=this._name,r=this._id,s=Us(),u=this._groups,l=u.length,o=0;o<l;++o)for(var h=u[o],f=h.length,d,_=0;_<f;++_)if(d=h[_]){var v=St(d,r);qn(d,n,s,_,h,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Ut(u,this._parents,n,s)}function xf(){var n,r,s=this,u=s._id,l=s.size();return new Promise(function(o,h){var f={value:h},d={value:function(){--l===0&&o()}};s.each(function(){var _=Zt(this,u),v=_.on;v!==n&&(r=(n=v).copy(),r._.cancel.push(f),r._.interrupt.push(f),r._.end.push(d)),_.on=r}),l===0&&o()})}var Lf=0;function Ut(n,r,s,u){this._groups=n,this._parents=r,this._name=s,this._id=u}function Us(){return++Lf}var $t=tn.prototype;Ut.prototype={constructor:Ut,select:ef,selectAll:nf,selectChild:$t.selectChild,selectChildren:$t.selectChildren,filter:jc,merge:Xc,selection:of,transition:wf,call:$t.call,nodes:$t.nodes,node:$t.node,size:$t.size,empty:$t.empty,each:$t.each,on:Jc,attr:Oc,attrTween:Zc,style:lf,styleTween:df,text:mf,textTween:yf,remove:tf,tween:Cc,delay:Fc,duration:$c,ease:Wc,easeVarying:qc,end:xf,[Symbol.iterator]:$t[Symbol.iterator]};function Pf(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var bf={time:null,delay:0,duration:250,ease:Pf};function Cf(n,r){for(var s;!(s=n.__transition)||!(s=s[r]);)if(!(n=n.parentNode))throw new Error(`transition ${r} not found`);return s}function kf(n){var r,s;n instanceof Ut?(r=n._id,n=n._name):(r=Us(),(s=bf).time=lr(),n=n==null?null:n+"");for(var u=this._groups,l=u.length,o=0;o<l;++o)for(var h=u[o],f=h.length,d,_=0;_<f;++_)(d=h[_])&&qn(d,n,r,_,h,s||Cf(d,r));return new Ut(u,this._parents,n,r)}tn.prototype.interrupt=Lc;tn.prototype.transition=kf;var es={},Zi={},Ri=34,De=10,Di=13;function Ws(n){return new Function("d","return {"+n.map(function(r,s){return JSON.stringify(r)+": d["+s+'] || ""'}).join(",")+"}")}function Mf(n,r){var s=Ws(n);return function(u,l){return r(s(u),l,n)}}function ns(n){var r=Object.create(null),s=[];return n.forEach(function(u){for(var l in u)l in r||s.push(r[l]=l)}),s}function gt(n,r){var s=n+"",u=s.length;return u<r?new Array(r-u+1).join(0)+s:s}function Tf(n){return n<0?"-"+gt(-n,6):n>9999?"+"+gt(n,6):gt(n,4)}function Sf(n){var r=n.getUTCHours(),s=n.getUTCMinutes(),u=n.getUTCSeconds(),l=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":Tf(n.getUTCFullYear())+"-"+gt(n.getUTCMonth()+1,2)+"-"+gt(n.getUTCDate(),2)+(l?"T"+gt(r,2)+":"+gt(s,2)+":"+gt(u,2)+"."+gt(l,3)+"Z":u?"T"+gt(r,2)+":"+gt(s,2)+":"+gt(u,2)+"Z":s||r?"T"+gt(r,2)+":"+gt(s,2)+"Z":"")}function Ef(n){var r=new RegExp('["'+n+`
\r]`),s=n.charCodeAt(0);function u(g,p){var y,P,C=l(g,function(M,T){if(y)return y(M,T-1);P=M,y=p?Mf(M,p):Ws(M)});return C.columns=P||[],C}function l(g,p){var y=[],P=g.length,C=0,M=0,T,B=P<=0,O=!1;g.charCodeAt(P-1)===De&&--P,g.charCodeAt(P-1)===Di&&--P;function Y(){if(B)return Zi;if(O)return O=!1,es;var V,rt=C,ht;if(g.charCodeAt(rt)===Ri){for(;C++<P&&g.charCodeAt(C)!==Ri||g.charCodeAt(++C)===Ri;);return(V=C)>=P?B=!0:(ht=g.charCodeAt(C++))===De?O=!0:ht===Di&&(O=!0,g.charCodeAt(C)===De&&++C),g.slice(rt+1,V-1).replace(/""/g,'"')}for(;C<P;){if((ht=g.charCodeAt(V=C++))===De)O=!0;else if(ht===Di)O=!0,g.charCodeAt(C)===De&&++C;else if(ht!==s)continue;return g.slice(rt,V)}return B=!0,g.slice(rt,P)}for(;(T=Y())!==Zi;){for(var N=[];T!==es&&T!==Zi;)N.push(T),T=Y();p&&(N=p(N,M++))==null||y.push(N)}return y}function o(g,p){return g.map(function(y){return p.map(function(P){return v(y[P])}).join(n)})}function h(g,p){return p==null&&(p=ns(g)),[p.map(v).join(n)].concat(o(g,p)).join(`
`)}function f(g,p){return p==null&&(p=ns(g)),o(g,p).join(`
`)}function d(g){return g.map(_).join(`
`)}function _(g){return g.map(v).join(n)}function v(g){return g==null?"":g instanceof Date?Sf(g):r.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:u,parseRows:l,format:h,formatBody:f,formatRows:d,formatRow:_,formatValue:v}}var Af=Ef(","),Of=Af.parse;function Bf(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function zf(n,r){return fetch(n,r).then(Bf)}function If(n){return function(r,s,u){return arguments.length===2&&typeof s=="function"&&(u=s,s=void 0),zf(r,s).then(function(l){return n(l,u)})}}var Vs=If(Of);function Nf(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function Zf(n,r){return fetch(n,r).then(Nf)}function Rf(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function Fn(n,r){if((s=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var s,u=n.slice(0,s);return[u.length>1?u[0]+u.slice(2):u,+n.slice(s+1)]}function Le(n){return n=Fn(Math.abs(n)),n?n[1]:NaN}function Df(n,r){return function(s,u){for(var l=s.length,o=[],h=0,f=n[0],d=0;l>0&&f>0&&(d+f+1>u&&(f=Math.max(1,u-d)),o.push(s.substring(l-=f,l+f)),!((d+=f+1)>u));)f=n[h=(h+1)%n.length];return o.reverse().join(r)}}function Ff(n){return function(r){return r.replace(/[0-9]/g,function(s){return n[+s]})}}var Hf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hn(n){if(!(r=Hf.exec(n)))throw new Error("invalid format: "+n);var r;return new dr({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Hn.prototype=dr.prototype;function dr(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gf(n){t:for(var r=n.length,s=1,u=-1,l;s<r;++s)switch(n[s]){case".":u=l=s;break;case"0":u===0&&(u=s),l=s;break;default:if(!+n[s])break t;u>0&&(u=0);break}return u>0?n.slice(0,u)+n.slice(l+1):n}var qs;function $f(n,r){var s=Fn(n,r);if(!s)return n+"";var u=s[0],l=s[1],o=l-(qs=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,h=u.length;return o===h?u:o>h?u+new Array(o-h+1).join("0"):o>0?u.slice(0,o)+"."+u.slice(o):"0."+new Array(1-o).join("0")+Fn(n,Math.max(0,r+o-1))[0]}function is(n,r){var s=Fn(n,r);if(!s)return n+"";var u=s[0],l=s[1];return l<0?"0."+new Array(-l).join("0")+u:u.length>l+1?u.slice(0,l+1)+"."+u.slice(l+1):u+new Array(l-u.length+2).join("0")}const rs={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Rf,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>is(n*100,r),r:is,s:$f,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function os(n){return n}var ss=Array.prototype.map,as=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Uf(n){var r=n.grouping===void 0||n.thousands===void 0?os:Df(ss.call(n.grouping,Number),n.thousands+""),s=n.currency===void 0?"":n.currency[0]+"",u=n.currency===void 0?"":n.currency[1]+"",l=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?os:Ff(ss.call(n.numerals,String)),h=n.percent===void 0?"%":n.percent+"",f=n.minus===void 0?"−":n.minus+"",d=n.nan===void 0?"NaN":n.nan+"";function _(g){g=Hn(g);var p=g.fill,y=g.align,P=g.sign,C=g.symbol,M=g.zero,T=g.width,B=g.comma,O=g.precision,Y=g.trim,N=g.type;N==="n"?(B=!0,N="g"):rs[N]||(O===void 0&&(O=12),Y=!0,N="g"),(M||p==="0"&&y==="=")&&(M=!0,p="0",y="=");var V=C==="$"?s:C==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",rt=C==="$"?u:/[%p]/.test(N)?h:"",ht=rs[N],Pt=/[defgprs%]/.test(N);O=O===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function Q(E){var R=V,G=rt,W,dt,nt;if(N==="c")G=ht(E)+G,E="";else{E=+E;var tt=E<0||1/E<0;if(E=isNaN(E)?d:ht(Math.abs(E),O),Y&&(E=Gf(E)),tt&&+E==0&&P!=="+"&&(tt=!1),R=(tt?P==="("?P:f:P==="-"||P==="("?"":P)+R,G=(N==="s"?as[8+qs/3]:"")+G+(tt&&P==="("?")":""),Pt){for(W=-1,dt=E.length;++W<dt;)if(nt=E.charCodeAt(W),48>nt||nt>57){G=(nt===46?l+E.slice(W+1):E.slice(W))+G,E=E.slice(0,W);break}}}B&&!M&&(E=r(E,1/0));var z=R.length+E.length+G.length,_t=z<T?new Array(T-z+1).join(p):"";switch(B&&M&&(E=r(_t+E,_t.length?T-G.length:1/0),_t=""),y){case"<":E=R+E+G+_t;break;case"=":E=R+_t+E+G;break;case"^":E=_t.slice(0,z=_t.length>>1)+R+E+G+_t.slice(z);break;default:E=_t+R+E+G;break}return o(E)}return Q.toString=function(){return g+""},Q}function v(g,p){var y=_((g=Hn(g),g.type="f",g)),P=Math.max(-8,Math.min(8,Math.floor(Le(p)/3)))*3,C=Math.pow(10,-P),M=as[8+P/3];return function(T){return y(C*T)+M}}return{format:_,formatPrefix:v}}var kn,js,Xs;Wf({thousands:",",grouping:[3],currency:["$",""]});function Wf(n){return kn=Uf(n),js=kn.format,Xs=kn.formatPrefix,kn}function Vf(n){return Math.max(0,-Le(Math.abs(n)))}function qf(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Le(r)/3)))*3-Le(Math.abs(n)))}function jf(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,Le(r)-Le(n))+1}function Xf(n){var r=0,s=n.children,u=s&&s.length;if(!u)r=1;else for(;--u>=0;)r+=s[u].value;n.value=r}function Yf(){return this.eachAfter(Xf)}function Kf(n,r){let s=-1;for(const u of this)n.call(r,u,++s,this);return this}function Jf(n,r){for(var s=this,u=[s],l,o,h=-1;s=u.pop();)if(n.call(r,s,++h,this),l=s.children)for(o=l.length-1;o>=0;--o)u.push(l[o]);return this}function Qf(n,r){for(var s=this,u=[s],l=[],o,h,f,d=-1;s=u.pop();)if(l.push(s),o=s.children)for(h=0,f=o.length;h<f;++h)u.push(o[h]);for(;s=l.pop();)n.call(r,s,++d,this);return this}function td(n,r){let s=-1;for(const u of this)if(n.call(r,u,++s,this))return u}function ed(n){return this.eachAfter(function(r){for(var s=+n(r.data)||0,u=r.children,l=u&&u.length;--l>=0;)s+=u[l].value;r.value=s})}function nd(n){return this.eachBefore(function(r){r.children&&r.children.sort(n)})}function id(n){for(var r=this,s=rd(r,n),u=[r];r!==s;)r=r.parent,u.push(r);for(var l=u.length;n!==s;)u.splice(l,0,n),n=n.parent;return u}function rd(n,r){if(n===r)return n;var s=n.ancestors(),u=r.ancestors(),l=null;for(n=s.pop(),r=u.pop();n===r;)l=n,n=s.pop(),r=u.pop();return l}function od(){for(var n=this,r=[n];n=n.parent;)r.push(n);return r}function sd(){return Array.from(this)}function ad(){var n=[];return this.eachBefore(function(r){r.children||n.push(r)}),n}function hd(){var n=this,r=[];return n.each(function(s){s!==n&&r.push({source:s.parent,target:s})}),r}function*ud(){var n=this,r,s=[n],u,l,o;do for(r=s.reverse(),s=[];n=r.pop();)if(yield n,u=n.children)for(l=0,o=u.length;l<o;++l)s.push(u[l]);while(s.length)}function _r(n,r){n instanceof Map?(n=[void 0,n],r===void 0&&(r=fd)):r===void 0&&(r=cd);for(var s=new Gn(n),u,l=[s],o,h,f,d;u=l.pop();)if((h=r(u.data))&&(d=(h=Array.from(h)).length))for(u.children=h,f=d-1;f>=0;--f)l.push(o=h[f]=new Gn(h[f])),o.parent=u,o.depth=u.depth+1;return s.eachBefore(_d)}function ld(){return _r(this).eachBefore(dd)}function cd(n){return n.children}function fd(n){return Array.isArray(n)?n[1]:null}function dd(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function _d(n){var r=0;do n.height=r;while((n=n.parent)&&n.height<++r)}function Gn(n){this.data=n,this.depth=this.height=0,this.parent=null}Gn.prototype=_r.prototype={constructor:Gn,count:Yf,each:Kf,eachAfter:Qf,eachBefore:Jf,find:td,sum:ed,sort:nd,path:id,ancestors:od,descendants:sd,leaves:ad,links:hd,copy:ld,[Symbol.iterator]:ud};function pd(n){if(typeof n!="function")throw new Error;return n}function Fe(){return 0}function He(n){return function(){return n}}function md(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function gd(n,r,s,u,l){for(var o=n.children,h,f=-1,d=o.length,_=n.value&&(u-r)/n.value;++f<d;)h=o[f],h.y0=s,h.y1=l,h.x0=r,h.x1=r+=h.value*_}function vd(n,r,s,u,l){for(var o=n.children,h,f=-1,d=o.length,_=n.value&&(l-s)/n.value;++f<d;)h=o[f],h.x0=r,h.x1=u,h.y0=s,h.y1=s+=h.value*_}var yd=(1+Math.sqrt(5))/2;function wd(n,r,s,u,l,o){for(var h=[],f=r.children,d,_,v=0,g=0,p=f.length,y,P,C=r.value,M,T,B,O,Y,N,V;v<p;){y=l-s,P=o-u;do M=f[g++].value;while(!M&&g<p);for(T=B=M,N=Math.max(P/y,y/P)/(C*n),V=M*M*N,Y=Math.max(B/V,V/T);g<p;++g){if(M+=_=f[g].value,_<T&&(T=_),_>B&&(B=_),V=M*M*N,O=Math.max(B/V,V/T),O>Y){M-=_;break}Y=O}h.push(d={value:M,dice:y<P,children:f.slice(v,g)}),d.dice?gd(d,s,u,l,C?u+=P*M/C:o):vd(d,s,u,C?s+=y*M/C:l,o),C-=M,v=g}return h}const xd=function n(r){function s(u,l,o,h,f){wd(r,u,l,o,h,f)}return s.ratio=function(u){return n((u=+u)>1?u:1)},s}(yd);function Ld(){var n=xd,r=!1,s=1,u=1,l=[0],o=Fe,h=Fe,f=Fe,d=Fe,_=Fe;function v(p){return p.x0=p.y0=0,p.x1=s,p.y1=u,p.eachBefore(g),l=[0],r&&p.eachBefore(md),p}function g(p){var y=l[p.depth],P=p.x0+y,C=p.y0+y,M=p.x1-y,T=p.y1-y;M<P&&(P=M=(P+M)/2),T<C&&(C=T=(C+T)/2),p.x0=P,p.y0=C,p.x1=M,p.y1=T,p.children&&(y=l[p.depth+1]=o(p)/2,P+=_(p)-y,C+=h(p)-y,M-=f(p)-y,T-=d(p)-y,M<P&&(P=M=(P+M)/2),T<C&&(C=T=(C+T)/2),n(p,P,C,M,T))}return v.round=function(p){return arguments.length?(r=!!p,v):r},v.size=function(p){return arguments.length?(s=+p[0],u=+p[1],v):[s,u]},v.tile=function(p){return arguments.length?(n=pd(p),v):n},v.padding=function(p){return arguments.length?v.paddingInner(p).paddingOuter(p):v.paddingInner()},v.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:He(+p),v):o},v.paddingOuter=function(p){return arguments.length?v.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):v.paddingTop()},v.paddingTop=function(p){return arguments.length?(h=typeof p=="function"?p:He(+p),v):h},v.paddingRight=function(p){return arguments.length?(f=typeof p=="function"?p:He(+p),v):f},v.paddingBottom=function(p){return arguments.length?(d=typeof p=="function"?p:He(+p),v):d},v.paddingLeft=function(p){return arguments.length?(_=typeof p=="function"?p:He(+p),v):_},v}function jn(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n);break}return this}const hs=Symbol("implicit");function Xn(){var n=new $i,r=[],s=[],u=hs;function l(o){let h=n.get(o);if(h===void 0){if(u!==hs)return u;n.set(o,h=r.push(o)-1)}return s[h%s.length]}return l.domain=function(o){if(!arguments.length)return r.slice();r=[],n=new $i;for(const h of o)n.has(h)||n.set(h,r.push(h)-1);return l},l.range=function(o){return arguments.length?(s=Array.from(o),l):s.slice()},l.unknown=function(o){return arguments.length?(u=o,l):u},l.copy=function(){return Xn(r,s).unknown(u)},jn.apply(l,arguments),l}function Ys(){var n=Xn().unknown(void 0),r=n.domain,s=n.range,u=0,l=1,o,h,f=!1,d=0,_=0,v=.5;delete n.unknown;function g(){var p=r().length,y=l<u,P=y?l:u,C=y?u:l;o=(C-P)/Math.max(1,p-d+_*2),f&&(o=Math.floor(o)),P+=(C-P-o*(p-d))*v,h=o*(1-d),f&&(P=Math.round(P),h=Math.round(h));var M=Jh(p).map(function(T){return P+o*T});return s(y?M.reverse():M)}return n.domain=function(p){return arguments.length?(r(p),g()):r()},n.range=function(p){return arguments.length?([u,l]=p,u=+u,l=+l,g()):[u,l]},n.rangeRound=function(p){return[u,l]=p,u=+u,l=+l,f=!0,g()},n.bandwidth=function(){return h},n.step=function(){return o},n.round=function(p){return arguments.length?(f=!!p,g()):f},n.padding=function(p){return arguments.length?(d=Math.min(1,_=+p),g()):d},n.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),g()):d},n.paddingOuter=function(p){return arguments.length?(_=+p,g()):_},n.align=function(p){return arguments.length?(v=Math.max(0,Math.min(1,p)),g()):v},n.copy=function(){return Ys(r(),[u,l]).round(f).paddingInner(d).paddingOuter(_).align(v)},jn.apply(g(),arguments)}function Pd(n){return function(){return n}}function bd(n){return+n}var us=[0,1];function It(n){return n}function er(n,r){return(r-=n=+n)?function(s){return(s-n)/r}:Pd(isNaN(r)?NaN:.5)}function Cd(n,r){var s;return n>r&&(s=n,n=r,r=s),function(u){return Math.max(n,Math.min(r,u))}}function kd(n,r,s){var u=n[0],l=n[1],o=r[0],h=r[1];return l<u?(u=er(l,u),o=s(h,o)):(u=er(u,l),o=s(o,h)),function(f){return o(u(f))}}function Md(n,r,s){var u=Math.min(n.length,r.length)-1,l=new Array(u),o=new Array(u),h=-1;for(n[u]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++h<u;)l[h]=er(n[h],n[h+1]),o[h]=s(r[h],r[h+1]);return function(f){var d=Gh(n,f,1,u)-1;return o[d](l[d](f))}}function Ks(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function Js(){var n=us,r=us,s=ur,u,l,o,h=It,f,d,_;function v(){var p=Math.min(n.length,r.length);return h!==It&&(h=Cd(n[0],n[p-1])),f=p>2?Md:kd,d=_=null,g}function g(p){return p==null||isNaN(p=+p)?o:(d||(d=f(n.map(u),r,s)))(u(h(p)))}return g.invert=function(p){return h(l((_||(_=f(r,n.map(u),Mt)))(p)))},g.domain=function(p){return arguments.length?(n=Array.from(p,bd),v()):n.slice()},g.range=function(p){return arguments.length?(r=Array.from(p),v()):r.slice()},g.rangeRound=function(p){return r=Array.from(p),s=uc,v()},g.clamp=function(p){return arguments.length?(h=p?!0:It,v()):h!==It},g.interpolate=function(p){return arguments.length?(s=p,v()):s},g.unknown=function(p){return arguments.length?(o=p,g):o},function(p,y){return u=p,l=y,v()}}function Td(){return Js()(It,It)}function Sd(n,r,s,u){var l=Yh(n,r,s),o;switch(u=Hn(u??",f"),u.type){case"s":{var h=Math.max(Math.abs(n),Math.abs(r));return u.precision==null&&!isNaN(o=qf(l,h))&&(u.precision=o),Xs(u,h)}case"":case"e":case"g":case"p":case"r":{u.precision==null&&!isNaN(o=jf(l,Math.max(Math.abs(n),Math.abs(r))))&&(u.precision=o-(u.type==="e"));break}case"f":case"%":{u.precision==null&&!isNaN(o=Vf(l))&&(u.precision=o-(u.type==="%")*2);break}}return js(u)}function Qs(n){var r=n.domain;return n.ticks=function(s){var u=r();return Xh(u[0],u[u.length-1],s??10)},n.tickFormat=function(s,u){var l=r();return Sd(l[0],l[l.length-1],s??10,u)},n.nice=function(s){s==null&&(s=10);var u=r(),l=0,o=u.length-1,h=u[l],f=u[o],d,_,v=10;for(f<h&&(_=h,h=f,f=_,_=l,l=o,o=_);v-- >0;){if(_=Wi(h,f,s),_===d)return u[l]=h,u[o]=f,r(u);if(_>0)h=Math.floor(h/_)*_,f=Math.ceil(f/_)*_;else if(_<0)h=Math.ceil(h*_)/_,f=Math.floor(f*_)/_;else break;d=_}return n},n}function Je(){var n=Td();return n.copy=function(){return Ks(n,Je())},jn.apply(n,arguments),Qs(n)}function ls(n){return function(r){return r<0?-Math.pow(-r,n):Math.pow(r,n)}}function Ed(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Ad(n){return n<0?-n*n:n*n}function Od(n){var r=n(It,It),s=1;function u(){return s===1?n(It,It):s===.5?n(Ed,Ad):n(ls(s),ls(1/s))}return r.exponent=function(l){return arguments.length?(s=+l,u()):s},Qs(r)}function ta(){var n=Od(Js());return n.copy=function(){return Ks(n,ta()).exponent(n.exponent())},jn.apply(n,arguments),n}function Bd(){return ta.apply(null,arguments).exponent(.5)}function Mn(n){return function(){return n}}function zd(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function cs(n,r){if((h=n.length)>1)for(var s=1,u,l,o=n[r[0]],h,f=o.length;s<h;++s)for(l=o,o=n[r[s]],u=0;u<f;++u)o[u][1]+=o[u][0]=isNaN(l[u][1])?l[u][0]:l[u][1]}function fs(n){for(var r=n.length,s=new Array(r);--r>=0;)s[r]=r;return s}function Id(n,r){return n[r]}function Nd(n){const r=[];return r.key=n,r}function Zd(){var n=Mn([]),r=fs,s=cs,u=Id;function l(o){var h=Array.from(n.apply(this,arguments),Nd),f,d=h.length,_=-1,v;for(const g of o)for(f=0,++_;f<d;++f)(h[f][_]=[0,+u(g,h[f].key,_,o)]).data=g;for(f=0,v=zd(r(h));f<d;++f)h[v[f]].index=f;return s(h,v),h}return l.keys=function(o){return arguments.length?(n=typeof o=="function"?o:Mn(Array.from(o)),l):n},l.value=function(o){return arguments.length?(u=typeof o=="function"?o:Mn(+o),l):u},l.order=function(o){return arguments.length?(r=o==null?fs:typeof o=="function"?o:Mn(Array.from(o)),l):r},l.offset=function(o){return arguments.length?(s=o??cs,l):s},l}function We(n,r,s){this.k=n,this.x=r,this.y=s}We.prototype={constructor:We,scale:function(n){return n===1?this:new We(this.k*n,this.x,this.y)},translate:function(n,r){return n===0&r===0?this:new We(this.k,this.x+this.k*n,this.y+this.k*r)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};We.prototype;var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ds={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,r){(function(s,u){u(r)})(ea,function(s){var u="1.9.4";function l(t){var e,i,a,c;for(i=1,a=arguments.length;i<a;i++){c=arguments[i];for(e in c)t[e]=c[e]}return t}var o=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function h(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var a=i.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(i.call(arguments)):arguments)}}var f=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++f),t._leaflet_id}function _(t,e,i){var a,c,m,w;return w=function(){a=!1,c&&(m.apply(i,c),c=!1)},m=function(){a?c=arguments:(t.apply(i,arguments),setTimeout(w,e),a=!0)},m}function v(t,e,i){var a=e[1],c=e[0],m=a-c;return t===a&&i?t:((t-c)%m+m)%m+c}function g(){return!1}function p(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return y(t).split(/\s+/)}function C(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?o(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function M(t,e,i){var a=[];for(var c in t)a.push(encodeURIComponent(i?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!e||e.indexOf("?")===-1?"?":"&")+a.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function B(t,e){return t.replace(T,function(i,a){var c=e[a];if(c===void 0)throw new Error("No value provided for variable "+i);return typeof c=="function"&&(c=c(e)),c})}var O=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var rt=0;function ht(t){var e=+new Date,i=Math.max(0,16-(e-rt));return rt=e+i,window.setTimeout(t,i)}var Pt=window.requestAnimationFrame||V("RequestAnimationFrame")||ht,Q=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,i){if(i&&Pt===ht)t.call(e);else return Pt.call(window,h(t,e))}function R(t){t&&Q.call(window,t)}var G={__proto__:null,extend:l,create:o,bind:h,get lastId(){return f},stamp:d,throttle:_,wrapNum:v,falseFn:g,formatNum:p,trim:y,splitWords:P,setOptions:C,getParamString:M,template:B,isArray:O,indexOf:Y,emptyImageUrl:N,requestFn:Pt,cancelFn:Q,requestAnimFrame:E,cancelAnimFrame:R};function W(){}W.extend=function(t){var e=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,a=o(i);a.constructor=e,e.prototype=a;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(e[c]=this[c]);return t.statics&&l(e,t.statics),t.includes&&(dt(t.includes),l.apply(null,[a].concat(t.includes))),l(a,t),delete a.statics,delete a.includes,a.options&&(a.options=i.options?o(i.options):{},l(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,w=a._initHooks.length;m<w;m++)a._initHooks[m].call(this)}},e},W.include=function(t){var e=this.prototype.options;return l(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},W.mergeOptions=function(t){return l(this.prototype.options,t),this},W.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function dt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=O(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var nt={on:function(t,e,i){if(typeof t=="object")for(var a in t)this._on(a,t[a],e);else{t=P(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],e);else{t=P(t);for(var c=arguments.length===1,m=0,w=t.length;m<w;m++)c?this._off(t[m]):this._off(t[m],e,i)}return this},_on:function(t,e,i,a){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var c={fn:e,ctx:i};a&&(c.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(c)}},_off:function(t,e,i){var a,c,m;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(c=0,m=a.length;c<m;c++)a[c].fn=g;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var w=this._listens(t,e,i);if(w!==!1){var x=a[w];this._firingCount&&(x.fn=g,this._events[t]=a=a.slice()),a.splice(w,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var a=l({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var m=0,w=c.length;m<w;m++){var x=c[m],b=x.fn;x.once&&this.off(t,b,x.ctx),b.call(x.ctx||this,a)}this._firingCount--}}return i&&this._propagateEvent(a),this},listens:function(t,e,i,a){typeof t!="string"&&console.warn('"string" type argument expected');var c=e;typeof e!="function"&&(a=!!e,c=void 0,i=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,c,i)!==!1)return!0;if(a){for(var w in this._eventParents)if(this._eventParents[w].listens(t,e,i,a))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;i===this&&(i=void 0);for(var c=0,m=a.length;c<m;c++)if(a[c].fn===e&&a[c].ctx===i)return c;return!1},once:function(t,e,i){if(typeof t=="object")for(var a in t)this._on(a,t[a],e,!0);else{t=P(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,l({layer:t.target,propagatedFrom:t.target},t),!0)}};nt.addEventListener=nt.on,nt.removeEventListener=nt.clearAllEventListeners=nt.off,nt.addOneTimeEventListener=nt.once,nt.fireEvent=nt.fire,nt.hasEventListeners=nt.listens;var tt=W.extend(nt);function z(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var _t=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(Z(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(Z(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_t(this.x),this.y=_t(this.y),this},distanceTo:function(t){t=Z(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=Z(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=Z(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function Z(t,e,i){return t instanceof z?t:O(t)?new z(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new z(t.x,t.y):new z(t,e,i)}function K(t,e){if(t)for(var i=e?[t,e]:t,a=0,c=i.length;a<c;a++)this.extend(i[a])}K.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof z||typeof t[0]=="number"||"x"in t)e=i=Z(t);else if(t=ct(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return Z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return Z(this.min.x,this.max.y)},getTopRight:function(){return Z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof z?t=Z(t):t=ct(t),t instanceof K?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=ct(t);var e=this.min,i=this.max,a=t.min,c=t.max,m=c.x>=e.x&&a.x<=i.x,w=c.y>=e.y&&a.y<=i.y;return m&&w},overlaps:function(t){t=ct(t);var e=this.min,i=this.max,a=t.min,c=t.max,m=c.x>e.x&&a.x<i.x,w=c.y>e.y&&a.y<i.y;return m&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,a=Math.abs(e.x-i.x)*t,c=Math.abs(e.y-i.y)*t;return ct(Z(e.x-a,e.y-c),Z(i.x+a,i.y+c))},equals:function(t){return t?(t=ct(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ct(t,e){return!t||t instanceof K?t:new K(t,e)}function ft(t,e){if(t)for(var i=e?[t,e]:t,a=0,c=i.length;a<c;a++)this.extend(i[a])}ft.prototype={extend:function(t){var e=this._southWest,i=this._northEast,a,c;if(t instanceof q)a=t,c=t;else if(t instanceof ft){if(a=t._southWest,c=t._northEast,!a||!c)return this}else return t?this.extend($(t)||et(t)):this;return!e&&!i?(this._southWest=new q(a.lat,a.lng),this._northEast=new q(c.lat,c.lng)):(e.lat=Math.min(a.lat,e.lat),e.lng=Math.min(a.lng,e.lng),i.lat=Math.max(c.lat,i.lat),i.lng=Math.max(c.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,a=Math.abs(e.lat-i.lat)*t,c=Math.abs(e.lng-i.lng)*t;return new ft(new q(e.lat-a,e.lng-c),new q(i.lat+a,i.lng+c))},getCenter:function(){return new q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new q(this.getNorth(),this.getWest())},getSouthEast:function(){return new q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof q||"lat"in t?t=$(t):t=et(t);var e=this._southWest,i=this._northEast,a,c;return t instanceof ft?(a=t.getSouthWest(),c=t.getNorthEast()):a=c=t,a.lat>=e.lat&&c.lat<=i.lat&&a.lng>=e.lng&&c.lng<=i.lng},intersects:function(t){t=et(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>=e.lat&&a.lat<=i.lat,w=c.lng>=e.lng&&a.lng<=i.lng;return m&&w},overlaps:function(t){t=et(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>e.lat&&a.lat<i.lat,w=c.lng>e.lng&&a.lng<i.lng;return m&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=et(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function et(t,e){return t instanceof ft?t:new ft(t,e)}function q(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}q.prototype={equals:function(t,e){if(!t)return!1;t=$(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+p(this.lat,t)+", "+p(this.lng,t)+")"},distanceTo:function(t){return Wt.distance(this,$(t))},wrap:function(){return Wt.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return et([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new q(this.lat,this.lng,this.alt)}};function $(t,e,i){return t instanceof q?t:O(t)&&typeof t[0]!="object"?t.length===3?new q(t[0],t[1],t[2]):t.length===2?new q(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new q(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new q(t,e,i)}var Rt={latLngToPoint:function(t,e){var i=this.projection.project(t),a=this.scale(e);return this.transformation._transform(i,a)},pointToLatLng:function(t,e){var i=this.scale(e),a=this.transformation.untransform(t,i);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),a=this.transformation.transform(e.min,i),c=this.transformation.transform(e.max,i);return new K(a,c)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new q(i,e,a)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),a=e.lat-i.lat,c=e.lng-i.lng;if(a===0&&c===0)return t;var m=t.getSouthWest(),w=t.getNorthEast(),x=new q(m.lat-a,m.lng-c),b=new q(w.lat-a,w.lng-c);return new ft(x,b)}},Wt=l({},Rt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,a=t.lat*i,c=e.lat*i,m=Math.sin((e.lat-t.lat)*i/2),w=Math.sin((e.lng-t.lng)*i/2),x=m*m+Math.cos(a)*Math.cos(c)*w*w,b=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*b}}),Mr=6378137,Qn={R:Mr,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,a=Math.max(Math.min(i,t.lat),-i),c=Math.sin(a*e);return new z(this.R*t.lng*e,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var e=180/Math.PI;return new q((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Mr*Math.PI;return new K([-t,-t],[t,t])}()};function ti(t,e,i,a){if(O(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=a}ti.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function be(t,e,i,a){return new ti(t,e,i,a)}var ei=l({},Wt,{code:"EPSG:3857",projection:Qn,transformation:function(){var t=.5/(Math.PI*Qn.R);return be(t,.5,-t,.5)}()}),_a=l({},ei,{code:"EPSG:900913"});function Tr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Sr(t,e){var i="",a,c,m,w,x,b;for(a=0,m=t.length;a<m;a++){for(x=t[a],c=0,w=x.length;c<w;c++)b=x[c],i+=(c?"L":"M")+b.x+" "+b.y;i+=e?A.svg?"z":"x":""}return i||"M0 0"}var ni=document.documentElement.style,rn="ActiveXObject"in window,pa=rn&&!document.addEventListener,Er="msLaunchUri"in navigator&&!("documentMode"in document),ii=Et("webkit"),Ar=Et("android"),Or=Et("android 2")||Et("android 3"),ma=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ga=Ar&&Et("Google")&&ma<537&&!("AudioNode"in window),ri=!!window.opera,Br=!Er&&Et("chrome"),zr=Et("gecko")&&!ii&&!ri&&!rn,va=!Br&&Et("safari"),Ir=Et("phantom"),Nr="OTransition"in ni,ya=navigator.platform.indexOf("Win")===0,Zr=rn&&"transition"in ni,oi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Or,Rr="MozPerspective"in ni,wa=!window.L_DISABLE_3D&&(Zr||oi||Rr)&&!Nr&&!Ir,Ce=typeof orientation<"u"||Et("mobile"),xa=Ce&&ii,La=Ce&&oi,Dr=!window.PointerEvent&&window.MSPointerEvent,Fr=!!(window.PointerEvent||Dr),Hr="ontouchstart"in window||!!window.TouchEvent,Pa=!window.L_NO_TOUCH&&(Hr||Fr),ba=Ce&&ri,Ca=Ce&&zr,ka=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ma=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,e),window.removeEventListener("testPassiveEventSupport",g,e)}catch{}return t}(),Ta=function(){return!!document.createElement("canvas").getContext}(),si=!!(document.createElementNS&&Tr("svg").createSVGRect),Sa=!!si&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ea=!si&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Aa=navigator.platform.indexOf("Mac")===0,Oa=navigator.platform.indexOf("Linux")===0;function Et(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var A={ie:rn,ielt9:pa,edge:Er,webkit:ii,android:Ar,android23:Or,androidStock:ga,opera:ri,chrome:Br,gecko:zr,safari:va,phantom:Ir,opera12:Nr,win:ya,ie3d:Zr,webkit3d:oi,gecko3d:Rr,any3d:wa,mobile:Ce,mobileWebkit:xa,mobileWebkit3d:La,msPointer:Dr,pointer:Fr,touch:Pa,touchNative:Hr,mobileOpera:ba,mobileGecko:Ca,retina:ka,passiveEvents:Ma,canvas:Ta,svg:si,vml:Ea,inlineSvg:Sa,mac:Aa,linux:Oa},Gr=A.msPointer?"MSPointerDown":"pointerdown",$r=A.msPointer?"MSPointerMove":"pointermove",Ur=A.msPointer?"MSPointerUp":"pointerup",Wr=A.msPointer?"MSPointerCancel":"pointercancel",ai={touchstart:Gr,touchmove:$r,touchend:Ur,touchcancel:Wr},Vr={touchstart:Ra,touchmove:on,touchend:on,touchcancel:on},se={},qr=!1;function Ba(t,e,i){return e==="touchstart"&&Za(),Vr[e]?(i=Vr[e].bind(this,i),t.addEventListener(ai[e],i,!1),i):(console.warn("wrong event specified:",e),g)}function za(t,e,i){if(!ai[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(ai[e],i,!1)}function Ia(t){se[t.pointerId]=t}function Na(t){se[t.pointerId]&&(se[t.pointerId]=t)}function jr(t){delete se[t.pointerId]}function Za(){qr||(document.addEventListener(Gr,Ia,!0),document.addEventListener($r,Na,!0),document.addEventListener(Ur,jr,!0),document.addEventListener(Wr,jr,!0),qr=!0)}function on(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in se)e.touches.push(se[i]);e.changedTouches=[e],t(e)}}function Ra(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&lt(e),on(t,e)}function Da(t){var e={},i,a;for(a in t)i=t[a],e[a]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Fa=200;function Ha(t,e){t.addEventListener("dblclick",e);var i=0,a;function c(m){if(m.detail!==1){a=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var w=Qr(m);if(!(w.some(function(b){return b instanceof HTMLLabelElement&&b.attributes.for})&&!w.some(function(b){return b instanceof HTMLInputElement||b instanceof HTMLSelectElement}))){var x=Date.now();x-i<=Fa?(a++,a===2&&e(Da(m))):a=1,i=x}}}return t.addEventListener("click",c),{dblclick:e,simDblclick:c}}function Ga(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var hi=hn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ke=hn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xr=ke==="webkitTransition"||ke==="OTransition"?ke+"End":"transitionend";function Yr(t){return typeof t=="string"?document.getElementById(t):t}function Me(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);i=a?a[e]:null}return i==="auto"?null:i}function j(t,e,i){var a=document.createElement(t);return a.className=e||"",i&&i.appendChild(a),a}function it(t){var e=t.parentNode;e&&e.removeChild(t)}function sn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ae(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function he(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ui(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=an(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function F(t,e){if(t.classList!==void 0)for(var i=P(e),a=0,c=i.length;a<c;a++)t.classList.add(i[a]);else if(!ui(t,e)){var m=an(t);li(t,(m?m+" ":"")+e)}}function ot(t,e){t.classList!==void 0?t.classList.remove(e):li(t,y((" "+an(t)+" ").replace(" "+e+" "," ")))}function li(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function an(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function wt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&$a(t,e)}function $a(t,e){var i=!1,a="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(a)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function hn(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Yt(t,e,i){var a=e||new z(0,0);t.style[hi]=(A.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(i?" scale("+i+")":"")}function st(t,e){t._leaflet_pos=e,A.any3d?Yt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Kt(t){return t._leaflet_pos||new z(0,0)}var Te,Se,ci;if("onselectstart"in document)Te=function(){D(window,"selectstart",lt)},Se=function(){J(window,"selectstart",lt)};else{var Ee=hn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Te=function(){if(Ee){var t=document.documentElement.style;ci=t[Ee],t[Ee]="none"}},Se=function(){Ee&&(document.documentElement.style[Ee]=ci,ci=void 0)}}function fi(){D(window,"dragstart",lt)}function di(){J(window,"dragstart",lt)}var un,_i;function pi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(ln(),un=t,_i=t.style.outlineStyle,t.style.outlineStyle="none",D(window,"keydown",ln))}function ln(){un&&(un.style.outlineStyle=_i,un=void 0,_i=void 0,J(window,"keydown",ln))}function Kr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function mi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Ua={__proto__:null,TRANSFORM:hi,TRANSITION:ke,TRANSITION_END:Xr,get:Yr,getStyle:Me,create:j,remove:it,empty:sn,toFront:ae,toBack:he,hasClass:ui,addClass:F,removeClass:ot,setClass:li,getClass:an,setOpacity:wt,testProp:hn,setTransform:Yt,setPosition:st,getPosition:Kt,get disableTextSelection(){return Te},get enableTextSelection(){return Se},disableImageDrag:fi,enableImageDrag:di,preventOutline:pi,restoreOutline:ln,getSizedParentNode:Kr,getScale:mi};function D(t,e,i,a){if(e&&typeof e=="object")for(var c in e)vi(t,c,e[c],i);else{e=P(e);for(var m=0,w=e.length;m<w;m++)vi(t,e[m],i,a)}return this}var At="_leaflet_events";function J(t,e,i,a){if(arguments.length===1)Jr(t),delete t[At];else if(e&&typeof e=="object")for(var c in e)yi(t,c,e[c],i);else if(e=P(e),arguments.length===2)Jr(t,function(x){return Y(e,x)!==-1});else for(var m=0,w=e.length;m<w;m++)yi(t,e[m],i,a);return this}function Jr(t,e){for(var i in t[At]){var a=i.split(/\d/)[0];(!e||e(a))&&yi(t,a,null,null,i)}}var gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vi(t,e,i,a){var c=e+d(i)+(a?"_"+d(a):"");if(t[At]&&t[At][c])return this;var m=function(x){return i.call(a||t,x||window.event)},w=m;!A.touchNative&&A.pointer&&e.indexOf("touch")===0?m=Ba(t,e,m):A.touch&&e==="dblclick"?m=Ha(t,m):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(gi[e]||e,m,A.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(m=function(x){x=x||window.event,xi(t,x)&&w(x)},t.addEventListener(gi[e],m,!1)):t.addEventListener(e,w,!1):t.attachEvent("on"+e,m),t[At]=t[At]||{},t[At][c]=m}function yi(t,e,i,a,c){c=c||e+d(i)+(a?"_"+d(a):"");var m=t[At]&&t[At][c];if(!m)return this;!A.touchNative&&A.pointer&&e.indexOf("touch")===0?za(t,e,m):A.touch&&e==="dblclick"?Ga(t,m):"removeEventListener"in t?t.removeEventListener(gi[e]||e,m,!1):t.detachEvent("on"+e,m),t[At][c]=null}function Jt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function wi(t){return vi(t,"wheel",Jt),this}function Ae(t){return D(t,"mousedown touchstart dblclick contextmenu",Jt),t._leaflet_disable_click=!0,this}function lt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Qt(t){return lt(t),Jt(t),this}function Qr(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function to(t,e){if(!e)return new z(t.clientX,t.clientY);var i=mi(e),a=i.boundingClientRect;return new z((t.clientX-a.left)/i.x-e.clientLeft,(t.clientY-a.top)/i.y-e.clientTop)}var Wa=A.linux&&A.chrome?window.devicePixelRatio:A.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function eo(t){return A.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Wa:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function xi(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var Va={__proto__:null,on:D,off:J,stopPropagation:Jt,disableScrollPropagation:wi,disableClickPropagation:Ae,preventDefault:lt,stop:Qt,getPropagationPath:Qr,getMousePosition:to,getWheelDelta:eo,isExternalTarget:xi,addListener:D,removeListener:J},no=tt.extend({run:function(t,e,i,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Kt(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),st(this._el,i),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),U=tt.extend({options:{crs:ei,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=C(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView($(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ke&&A.any3d&&!A.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),D(this._proxy,Xr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter($(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=l({animate:i.animate},i.zoom),i.pan=l({animate:i.animate,duration:i.duration},i.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(A.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(A.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var a=this.getZoomScale(e),c=this.getSize().divideBy(2),m=t instanceof z?t:this.latLngToContainerPoint(t),w=m.subtract(c).multiplyBy(1-1/a),x=this.containerPointToLatLng(c.add(w));return this.setView(x,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():et(t);var i=Z(e.paddingTopLeft||e.padding||[0,0]),a=Z(e.paddingBottomRight||e.padding||[0,0]),c=this.getBoundsZoom(t,!1,i.add(a));if(c=typeof e.maxZoom=="number"?Math.min(e.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var m=a.subtract(i).divideBy(2),w=this.project(t.getSouthWest(),c),x=this.project(t.getNorthEast(),c),b=this.unproject(w.add(x).divideBy(2).add(m),c);return{center:b,zoom:c}},fitBounds:function(t,e){if(t=et(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=Z(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new no,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){F(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!A.any3d)return this.setView(t,e,i);this._stop();var a=this.project(this.getCenter()),c=this.project(t),m=this.getSize(),w=this._zoom;t=$(t),e=e===void 0?w:e;var x=Math.max(m.x,m.y),b=x*this.getZoomScale(w,e),k=c.distanceTo(a)||1,S=1.42,I=S*S;function H(at){var Ln=at?-1:1,zh=at?b:x,Ih=b*b-x*x+Ln*I*I*k*k,Nh=2*zh*I*k,Oi=Ih/Nh,Zo=Math.sqrt(Oi*Oi+1)-Oi,Zh=Zo<1e-9?-18:Math.log(Zo);return Zh}function pt(at){return(Math.exp(at)-Math.exp(-at))/2}function ut(at){return(Math.exp(at)+Math.exp(-at))/2}function Lt(at){return pt(at)/ut(at)}var mt=H(0);function _e(at){return x*(ut(mt)/ut(mt+S*at))}function Eh(at){return x*(ut(mt)*Lt(mt+S*at)-pt(mt))/I}function Ah(at){return 1-Math.pow(1-at,1.5)}var Oh=Date.now(),Io=(H(1)-mt)/S,Bh=i.duration?1e3*i.duration:1e3*Io*.8;function No(){var at=(Date.now()-Oh)/Bh,Ln=Ah(at)*Io;at<=1?(this._flyToFrame=E(No,this),this._move(this.unproject(a.add(c.subtract(a).multiplyBy(Eh(Ln)/k)),w),this.getScaleZoom(x/_e(Ln),w),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),No.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=et(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),a=this._limitCenter(i,this._zoom,et(t));return i.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=Z(e.paddingTopLeft||e.padding||[0,0]),a=Z(e.paddingBottomRight||e.padding||[0,0]),c=this.project(this.getCenter()),m=this.project(t),w=this.getPixelBounds(),x=ct([w.min.add(i),w.max.subtract(a)]),b=x.getSize();if(!x.contains(m)){this._enforcingBounds=!0;var k=m.subtract(x.getCenter()),S=x.extend(m).getSize().subtract(b);c.x+=k.x<0?-S.x:S.x,c.y+=k.y<0?-S.y:S.y,this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=l({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),a=e.divideBy(2).round(),c=i.divideBy(2).round(),m=a.subtract(c);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=l({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=h(this._handleGeolocationResponse,this),i=h(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,a=new q(e,i),c=a.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var w=this.getBoundsZoom(c);this.setView(a,m.maxZoom?Math.min(w,m.maxZoom):w)}var x={latlng:a,bounds:c,timestamp:t.timestamp};for(var b in t.coords)typeof t.coords[b]=="number"&&(x[b]=t.coords[b]);this.fire("locationfound",x)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),it(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)it(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=j("div",i,e||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new ft(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=et(t),i=Z(i||[0,0]);var a=this.getZoom()||0,c=this.getMinZoom(),m=this.getMaxZoom(),w=t.getNorthWest(),x=t.getSouthEast(),b=this.getSize().subtract(i),k=ct(this.project(x,a),this.project(w,a)).getSize(),S=A.any3d?this.options.zoomSnap:1,I=b.x/k.x,H=b.y/k.y,pt=e?Math.max(I,H):Math.min(I,H);return a=this.getScaleZoom(pt,a),S&&(a=Math.round(a/(S/100))*(S/100),a=e?Math.ceil(a/S)*S:Math.floor(a/S)*S),Math.max(c,Math.min(m,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new K(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var a=i.zoom(t*i.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint($(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(Z(t),e)},layerPointToLatLng:function(t){var e=Z(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project($(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng($(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(et(t))},distance:function(t,e){return this.options.crs.distance($(t),$(e))},containerPointToLayerPoint:function(t){return Z(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return Z(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(Z(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint($(t)))},mouseEventToContainerPoint:function(t){return to(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Yr(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");D(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&A.any3d,F(t,"leaflet-container"+(A.touch?" leaflet-touch":"")+(A.retina?" leaflet-retina":"")+(A.ielt9?" leaflet-oldie":"")+(A.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Me(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(F(t.markerPane,"leaflet-zoom-hide"),F(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){st(this._mapPane,new z(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var c=this._zoom!==e;this._moveStart(c,i)._move(t,e)._moveEnd(c),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,a){e===void 0&&(e=this._zoom);var c=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?i&&i.pinch&&this.fire("zoom",i):((c||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){st(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?J:D;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),A.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],a,c=e==="mouseout"||e==="mouseover",m=t.target||t.srcElement,w=!1;m;){if(a=this._targets[d(m)],a&&(e==="click"||e==="preclick")&&this._draggableMoved(a)){w=!0;break}if(a&&a.listens(e,!0)&&(c&&!xi(m,t)||(i.push(a),c))||m===this._container)break;m=m.parentNode}return!i.length&&!w&&!c&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&pi(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var a=l({},t);a.type="preclick",this._fireDOMEvent(a,a.type,i)}var c=this._findEventTargets(t,e);if(i){for(var m=[],w=0;w<i.length;w++)i[w].listens(e,!0)&&m.push(i[w]);c=m.concat(c)}if(c.length){e==="contextmenu"&&lt(t);var x=c[0],b={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var k=x.getLatLng&&(!x._radius||x._radius<=10);b.containerPoint=k?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=k?x.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(w=0;w<c.length;w++)if(c[w].fire(e,b,!0),b.originalEvent._stopped||c[w].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Kt(this._mapPane)||new z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return ct([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var a=this.project(t,e),c=this.getSize().divideBy(2),m=new K(a.subtract(c),a.add(c)),w=this._getBoundsOffset(m,i,e);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?t:this.unproject(a.add(w),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),a=new K(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,i){var a=ct(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),c=a.min.subtract(t.min),m=a.max.subtract(t.max),w=this._rebound(c.x,-m.x),x=this._rebound(c.y,-m.y);return new z(w,x)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),a=A.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ot(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=j("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=hi,a=this._proxy.style[i];Yt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),a===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){it(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Yt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),c=this._getCenterOffset(t)._divideBy(1-1/a);return i.animate!==!0&&!this.getSize().contains(c)?!1:(E(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,a){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,F(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ot(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function qa(t,e){return new U(t,e)}var bt=W.extend({options:{position:"topright"},initialize:function(t){C(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),a=t._controlCorners[i];return F(e,"leaflet-control"),i.indexOf("bottom")!==-1?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(it(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Oe=function(t){return new bt(t)};U.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=j("div",e+"control-container",this._container);function a(c,m){var w=e+c+" "+e+m;t[c+m]=j("div",w,i)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)it(this._controlCorners[t]);it(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var io=bt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,a){return i<a?-1:a<i?1:0}},initialize:function(t,e,i){C(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return bt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){F(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(F(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ot(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ot(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=j("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ae(e),wi(e);var a=this._section=j("section",t+"-list");i&&(this._map.on("click",this.collapse,this),D(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=j("a",t+"-toggle",e);c.href="#",c.title="Layers",c.setAttribute("role","button"),D(c,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){lt(m),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=j("div",t+"-base",a),this._separator=j("div",t+"-separator",a),this._overlaysList=j("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(h(function(a,c){return this.options.sortFunction(a.layer,c.layer,a.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;sn(this._baseLayersList),sn(this._overlaysList),this._layerControlInputs=[];var t,e,i,a,c=0;for(i=0;i<this._layers.length;i++)a=this._layers[i],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,c+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=i,a.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=i):a=this._createRadioElement("leaflet-base-layers_"+d(this),i),this._layerControlInputs.push(a),a.layerId=d(t.layer),D(a,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var m=document.createElement("span");e.appendChild(m),m.appendChild(a),m.appendChild(c);var w=t.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,a=[],c=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)e=t[m],i=this._getLayer(e.layerId).layer,e.checked?a.push(i):e.checked||c.push(i);for(m=0;m<c.length;m++)this._map.hasLayer(c[m])&&this._map.removeLayer(c[m]);for(m=0;m<a.length;m++)this._map.hasLayer(a[m])||this._map.addLayer(a[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,a=this._map.getZoom(),c=t.length-1;c>=0;c--)e=t[c],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&a<i.options.minZoom||i.options.maxZoom!==void 0&&a>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,D(t,"click",lt),this.expand();var e=this;setTimeout(function(){J(t,"click",lt),e._preventClick=!1})}}),ja=function(t,e,i){return new io(t,e,i)},Li=bt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=j("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,a,c){var m=j("a",i,a);return m.innerHTML=t,m.href="#",m.title=e,m.setAttribute("role","button"),m.setAttribute("aria-label",e),Ae(m),D(m,"click",Qt),D(m,"click",c,this),D(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ot(this._zoomInButton,e),ot(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(F(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(F(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});U.mergeOptions({zoomControl:!0}),U.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Li,this.addControl(this.zoomControl))});var Xa=function(t){return new Li(t)},ro=bt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=j("div",e),a=this.options;return this._addScales(a,e+"-line",i),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=j("div",e,i)),t.imperial&&(this._iScale=j("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,a,c;e>5280?(i=e/5280,a=this._getRoundNum(i),this._updateScale(this._iScale,a+" mi",a/i)):(c=this._getRoundNum(e),this._updateScale(this._iScale,c+" ft",c/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Ya=function(t){return new ro(t)},Ka='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Pi=bt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(A.inlineSvg?Ka+" ":"")+"Leaflet</a>"},initialize:function(t){C(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=j("div","leaflet-control-attribution"),Ae(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});U.mergeOptions({attributionControl:!0}),U.addInitHook(function(){this.options.attributionControl&&new Pi().addTo(this)});var Ja=function(t){return new Pi(t)};bt.Layers=io,bt.Zoom=Li,bt.Scale=ro,bt.Attribution=Pi,Oe.layers=ja,Oe.zoom=Xa,Oe.scale=Ya,Oe.attribution=Ja;var Ot=W.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ot.addTo=function(t,e){return t.addHandler(e,this),this};var Qa={Events:nt},oo=A.touch?"touchstart mousedown":"mousedown",Vt=tt.extend({options:{clickTolerance:3},initialize:function(t,e,i,a){C(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(D(this._dragStartTarget,oo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vt._dragging===this&&this.finishDrag(!0),J(this._dragStartTarget,oo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ui(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Vt._dragging===this&&this.finishDrag();return}if(!(Vt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Vt._dragging=this,this._preventOutline&&pi(this._element),fi(),Te(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=Kr(this._element);this._startPoint=new z(e.clientX,e.clientY),this._startPos=Kt(this._element),this._parentScale=mi(i);var a=t.type==="mousedown";D(document,a?"mousemove":"touchmove",this._onMove,this),D(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new z(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,lt(t),this._moved||(this.fire("dragstart"),this._moved=!0,F(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),F(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),st(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ot(document.body,"leaflet-dragging"),this._lastTarget&&(ot(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),J(document,"mousemove touchmove",this._onMove,this),J(document,"mouseup touchend touchcancel",this._onUp,this),di(),Se();var e=this._moved&&this._moving;this._moving=!1,Vt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function so(t,e,i){var a,c=[1,4,2,8],m,w,x,b,k,S,I,H;for(m=0,S=t.length;m<S;m++)t[m]._code=te(t[m],e);for(x=0;x<4;x++){for(I=c[x],a=[],m=0,S=t.length,w=S-1;m<S;w=m++)b=t[m],k=t[w],b._code&I?k._code&I||(H=cn(k,b,I,e,i),H._code=te(H,e),a.push(H)):(k._code&I&&(H=cn(k,b,I,e,i),H._code=te(H,e),a.push(H)),a.push(b));t=a}return t}function ao(t,e){var i,a,c,m,w,x,b,k,S;if(!t||t.length===0)throw new Error("latlngs not passed");xt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var I=$([0,0]),H=et(t),pt=H.getNorthWest().distanceTo(H.getSouthWest())*H.getNorthEast().distanceTo(H.getNorthWest());pt<1700&&(I=bi(t));var ut=t.length,Lt=[];for(i=0;i<ut;i++){var mt=$(t[i]);Lt.push(e.project($([mt.lat-I.lat,mt.lng-I.lng])))}for(x=b=k=0,i=0,a=ut-1;i<ut;a=i++)c=Lt[i],m=Lt[a],w=c.y*m.x-m.y*c.x,b+=(c.x+m.x)*w,k+=(c.y+m.y)*w,x+=w*3;x===0?S=Lt[0]:S=[b/x,k/x];var _e=e.unproject(Z(S));return $([_e.lat+I.lat,_e.lng+I.lng])}function bi(t){for(var e=0,i=0,a=0,c=0;c<t.length;c++){var m=$(t[c]);e+=m.lat,i+=m.lng,a++}return $([e/a,i/a])}var th={__proto__:null,clipPolygon:so,polygonCenter:ao,centroid:bi};function ho(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=ih(t,i),t=nh(t,i),t}function uo(t,e,i){return Math.sqrt(Be(t,e,i,!0))}function eh(t,e,i){return Be(t,e,i)}function nh(t,e){var i=t.length,a=typeof Uint8Array<"u"?Uint8Array:Array,c=new a(i);c[0]=c[i-1]=1,Ci(t,c,e,0,i-1);var m,w=[];for(m=0;m<i;m++)c[m]&&w.push(t[m]);return w}function Ci(t,e,i,a,c){var m=0,w,x,b;for(x=a+1;x<=c-1;x++)b=Be(t[x],t[a],t[c],!0),b>m&&(w=x,m=b);m>i&&(e[w]=1,Ci(t,e,i,a,w),Ci(t,e,i,w,c))}function ih(t,e){for(var i=[t[0]],a=1,c=0,m=t.length;a<m;a++)rh(t[a],t[c])>e&&(i.push(t[a]),c=a);return c<m-1&&i.push(t[m-1]),i}var lo;function co(t,e,i,a,c){var m=a?lo:te(t,i),w=te(e,i),x,b,k;for(lo=w;;){if(!(m|w))return[t,e];if(m&w)return!1;x=m||w,b=cn(t,e,x,i,c),k=te(b,i),x===m?(t=b,m=k):(e=b,w=k)}}function cn(t,e,i,a,c){var m=e.x-t.x,w=e.y-t.y,x=a.min,b=a.max,k,S;return i&8?(k=t.x+m*(b.y-t.y)/w,S=b.y):i&4?(k=t.x+m*(x.y-t.y)/w,S=x.y):i&2?(k=b.x,S=t.y+w*(b.x-t.x)/m):i&1&&(k=x.x,S=t.y+w*(x.x-t.x)/m),new z(k,S,c)}function te(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function rh(t,e){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a}function Be(t,e,i,a){var c=e.x,m=e.y,w=i.x-c,x=i.y-m,b=w*w+x*x,k;return b>0&&(k=((t.x-c)*w+(t.y-m)*x)/b,k>1?(c=i.x,m=i.y):k>0&&(c+=w*k,m+=x*k)),w=t.x-c,x=t.y-m,a?w*w+x*x:new z(c,m)}function xt(t){return!O(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function fo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xt(t)}function _o(t,e){var i,a,c,m,w,x,b,k;if(!t||t.length===0)throw new Error("latlngs not passed");xt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var S=$([0,0]),I=et(t),H=I.getNorthWest().distanceTo(I.getSouthWest())*I.getNorthEast().distanceTo(I.getNorthWest());H<1700&&(S=bi(t));var pt=t.length,ut=[];for(i=0;i<pt;i++){var Lt=$(t[i]);ut.push(e.project($([Lt.lat-S.lat,Lt.lng-S.lng])))}for(i=0,a=0;i<pt-1;i++)a+=ut[i].distanceTo(ut[i+1])/2;if(a===0)k=ut[0];else for(i=0,m=0;i<pt-1;i++)if(w=ut[i],x=ut[i+1],c=w.distanceTo(x),m+=c,m>a){b=(m-a)/c,k=[x.x-b*(x.x-w.x),x.y-b*(x.y-w.y)];break}var mt=e.unproject(Z(k));return $([mt.lat+S.lat,mt.lng+S.lng])}var oh={__proto__:null,simplify:ho,pointToSegmentDistance:uo,closestPointOnSegment:eh,clipSegment:co,_getEdgeIntersection:cn,_getBitCode:te,_sqClosestPointOnSegment:Be,isFlat:xt,_flat:fo,polylineCenter:_o},ki={project:function(t){return new z(t.lng,t.lat)},unproject:function(t){return new q(t.y,t.x)},bounds:new K([-180,-90],[180,90])},Mi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,a=t.lat*e,c=this.R_MINOR/i,m=Math.sqrt(1-c*c),w=m*Math.sin(a),x=Math.tan(Math.PI/4-a/2)/Math.pow((1-w)/(1+w),m/2);return a=-i*Math.log(Math.max(x,1e-10)),new z(t.lng*e*i,a)},unproject:function(t){for(var e=180/Math.PI,i=this.R,a=this.R_MINOR/i,c=Math.sqrt(1-a*a),m=Math.exp(-t.y/i),w=Math.PI/2-2*Math.atan(m),x=0,b=.1,k;x<15&&Math.abs(b)>1e-7;x++)k=c*Math.sin(w),k=Math.pow((1-k)/(1+k),c/2),b=Math.PI/2-2*Math.atan(m*k)-w,w+=b;return new q(w*e,t.x*e/i)}},sh={__proto__:null,LonLat:ki,Mercator:Mi,SphericalMercator:Qn},ah=l({},Wt,{code:"EPSG:3395",projection:Mi,transformation:function(){var t=.5/(Math.PI*Mi.R);return be(t,.5,-t,.5)}()}),po=l({},Wt,{code:"EPSG:4326",projection:ki,transformation:be(1/180,1,-1/180,.5)}),hh=l({},Rt,{projection:ki,transformation:be(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(i*i+a*a)},infinite:!0});Rt.Earth=Wt,Rt.EPSG3395=ah,Rt.EPSG3857=ei,Rt.EPSG900913=_a,Rt.EPSG4326=po,Rt.Simple=hh;var Ct=tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});U.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?O(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var a in this._zoomBoundLayers){var c=this._zoomBoundLayers[a].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),e=c.maxZoom===void 0?e:Math.max(e,c.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ue=Ct.extend({initialize:function(t,e){C(this,e),this._layers={};var i,a;if(t)for(i=0,a=t.length;i<a;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,a;for(i in this._layers)a=this._layers[i],a[t]&&a[t].apply(a,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),uh=function(t,e){return new ue(t,e)},Dt=ue.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ue.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ue.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ft;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),lh=function(t,e){return new Dt(t,e)},le=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){C(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var i=this.options,a=i[e+"Size"];typeof a=="number"&&(a=[a,a]);var c=Z(a),m=Z(e==="shadow"&&i.shadowAnchor||i.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return A.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function ch(t){return new le(t)}var ze=le.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ze.imagePath!="string"&&(ze.imagePath=this._detectIconPath()),(this.options.imagePath||ze.imagePath)+le.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,a,c){var m=a.exec(i);return m&&m[c]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=j("div","leaflet-default-icon-path",document.body),e=Me(t,"background-image")||Me(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),mo=Ot.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Vt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),F(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ot(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,a=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,m=Kt(e._icon),w=i.getPixelBounds(),x=i.getPixelOrigin(),b=ct(w.min._subtract(x).add(c),w.max._subtract(x).subtract(c));if(!b.contains(m)){var k=Z((Math.max(b.max.x,m.x)-b.max.x)/(w.max.x-b.max.x)-(Math.min(b.min.x,m.x)-b.min.x)/(w.min.x-b.min.x),(Math.max(b.max.y,m.y)-b.max.y)/(w.max.y-b.max.y)-(Math.min(b.min.y,m.y)-b.min.y)/(w.min.y-b.min.y)).multiplyBy(a);i.panBy(k,{animate:!1}),this._draggable._newPos._add(k),this._draggable._startPos._add(k),st(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,a=Kt(e._icon),c=e._map.layerPointToLatLng(a);i&&st(i,a),e._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),fn=Ct.extend({options:{icon:new ze,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){C(this,e),this._latlng=$(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=$(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),a=!1;i!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),F(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&D(i,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),m=!1;c!==this._shadow&&(this._removeShadow(),m=!0),c&&(F(c,e),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(this._icon,"focus",this._panOnFocus,this),it(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&it(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(F(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&wt(this._icon,t),this._shadow&&wt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?Z(e.iconSize):Z(0,0),a=e.iconAnchor?Z(e.iconAnchor):Z(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:i.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function fh(t,e){return new fn(t,e)}var qt=Ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return C(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dn=qt.extend({options:{fill:!0,radius:10},initialize:function(t,e){C(this,e),this._latlng=$(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=$(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return qt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),a=[t+i,e+i];this._pxBounds=new K(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dh(t,e){return new dn(t,e)}var Ti=dn.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=l({},i,{radius:e})),C(this,e),this._latlng=$(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:qt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,a=i.options.crs;if(a.distance===Wt.distance){var c=Math.PI/180,m=this._mRadius/Wt.R/c,w=i.project([e+m,t]),x=i.project([e-m,t]),b=w.add(x).divideBy(2),k=i.unproject(b).lat,S=Math.acos((Math.cos(m*c)-Math.sin(e*c)*Math.sin(k*c))/(Math.cos(e*c)*Math.cos(k*c)))/c;(isNaN(S)||S===0)&&(S=m/Math.cos(Math.PI/180*e)),this._point=b.subtract(i.getPixelOrigin()),this._radius=isNaN(S)?0:b.x-i.project([k,t-S]).x,this._radiusY=b.y-w.y}else{var I=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(I).x}this._updateBounds()}});function _h(t,e,i){return new Ti(t,e,i)}var Ft=qt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){C(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,a=Be,c,m,w=0,x=this._parts.length;w<x;w++)for(var b=this._parts[w],k=1,S=b.length;k<S;k++){c=b[k-1],m=b[k];var I=a(t,c,m,!0);I<e&&(e=I,i=a(t,c,m))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _o(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=$(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ft,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=xt(t),a=0,c=t.length;a<c;a++)i?(e[a]=$(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new z(t,t);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var a=t[0]instanceof q,c=t.length,m,w;if(a){for(w=[],m=0;m<c;m++)w[m]=this._map.latLngToLayerPoint(t[m]),i.extend(w[m]);e.push(w)}else for(m=0;m<c;m++)this._projectLatlngs(t[m],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,a,c,m,w,x,b;for(i=0,c=0,m=this._rings.length;i<m;i++)for(b=this._rings[i],a=0,w=b.length;a<w-1;a++)x=co(b[a],b[a+1],t,a,!0),x&&(e[c]=e[c]||[],e[c].push(x[0]),(x[1]!==b[a+1]||a===w-2)&&(e[c].push(x[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,a=t.length;i<a;i++)t[i]=ho(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,a,c,m,w,x,b=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,m=this._parts.length;i<m;i++)for(x=this._parts[i],a=0,w=x.length,c=w-1;a<w;c=a++)if(!(!e&&a===0)&&uo(t,x[c],x[a])<=b)return!0;return!1}});function ph(t,e){return new Ft(t,e)}Ft._flat=fo;var ce=Ft.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Ft.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof q&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Ft.prototype._setLatLngs.call(this,t),xt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new z(e,e);if(t=new K(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,c=this._rings.length,m;a<c;a++)m=so(this._rings[a],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,a,c,m,w,x,b,k;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,b=this._parts.length;m<b;m++)for(i=this._parts[m],w=0,k=i.length,x=k-1;w<k;x=w++)a=i[w],c=i[x],a.y>t.y!=c.y>t.y&&t.x<(c.x-a.x)*(t.y-a.y)/(c.y-a.y)+a.x&&(e=!e);return e||Ft.prototype._containsPoint.call(this,t,!0)}});function mh(t,e){return new ce(t,e)}var Ht=Dt.extend({initialize:function(t,e){C(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=O(t)?t:t.features,i,a,c;if(e){for(i=0,a=e.length;i<a;i++)c=e[i],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var w=_n(t,m);return w?(w.feature=gn(t),w.defaultOptions=w.options,this.resetStyle(w),m.onEachFeature&&m.onEachFeature(t,w),this.addLayer(w)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=l({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function _n(t,e){var i=t.type==="Feature"?t.geometry:t,a=i?i.coordinates:null,c=[],m=e&&e.pointToLayer,w=e&&e.coordsToLatLng||Si,x,b,k,S;if(!a&&!i)return null;switch(i.type){case"Point":return x=w(a),go(m,t,x,e);case"MultiPoint":for(k=0,S=a.length;k<S;k++)x=w(a[k]),c.push(go(m,t,x,e));return new Dt(c);case"LineString":case"MultiLineString":return b=pn(a,i.type==="LineString"?0:1,w),new Ft(b,e);case"Polygon":case"MultiPolygon":return b=pn(a,i.type==="Polygon"?1:2,w),new ce(b,e);case"GeometryCollection":for(k=0,S=i.geometries.length;k<S;k++){var I=_n({geometry:i.geometries[k],type:"Feature",properties:t.properties},e);I&&c.push(I)}return new Dt(c);case"FeatureCollection":for(k=0,S=i.features.length;k<S;k++){var H=_n(i.features[k],e);H&&c.push(H)}return new Dt(c);default:throw new Error("Invalid GeoJSON object.")}}function go(t,e,i,a){return t?t(e,i):new fn(i,a&&a.markersInheritOptions&&a)}function Si(t){return new q(t[1],t[0],t[2])}function pn(t,e,i){for(var a=[],c=0,m=t.length,w;c<m;c++)w=e?pn(t[c],e-1,i):(i||Si)(t[c]),a.push(w);return a}function Ei(t,e){return t=$(t),t.alt!==void 0?[p(t.lng,e),p(t.lat,e),p(t.alt,e)]:[p(t.lng,e),p(t.lat,e)]}function mn(t,e,i,a){for(var c=[],m=0,w=t.length;m<w;m++)c.push(e?mn(t[m],xt(t[m])?0:e-1,i,a):Ei(t[m],a));return!e&&i&&c.length>0&&c.push(c[0].slice()),c}function fe(t,e){return t.feature?l({},t.feature,{geometry:e}):gn(e)}function gn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ai={toGeoJSON:function(t){return fe(this,{type:"Point",coordinates:Ei(this.getLatLng(),t)})}};fn.include(Ai),Ti.include(Ai),dn.include(Ai),Ft.include({toGeoJSON:function(t){var e=!xt(this._latlngs),i=mn(this._latlngs,e?1:0,!1,t);return fe(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),ce.include({toGeoJSON:function(t){var e=!xt(this._latlngs),i=e&&!xt(this._latlngs[0]),a=mn(this._latlngs,i?2:e?1:0,!0,t);return e||(a=[a]),fe(this,{type:(i?"Multi":"")+"Polygon",coordinates:a})}}),ue.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),fe(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",a=[];return this.eachLayer(function(c){if(c.toGeoJSON){var m=c.toGeoJSON(t);if(i)a.push(m.geometry);else{var w=gn(m);w.type==="FeatureCollection"?a.push.apply(a,w.features):a.push(w)}}}),i?fe(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function vo(t,e){return new Ht(t,e)}var gh=vo,vn=Ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=et(e),C(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(F(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){it(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ae(this._image),this},bringToBack:function(){return this._map&&he(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=et(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:j("img");if(F(e,"leaflet-image-layer"),this._zoomAnimated&&F(e,"leaflet-zoom-animated"),this.options.className&&F(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onload=h(this.fire,this,"load"),e.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Yt(this._image,i,e)},_reset:function(){var t=this._image,e=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();st(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){wt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),vh=function(t,e,i){return new vn(t,e,i)},yo=vn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:j("video");if(F(e,"leaflet-image-layer"),this._zoomAnimated&&F(e,"leaflet-zoom-animated"),this.options.className&&F(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onloadeddata=h(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),a=[],c=0;c<i.length;c++)a.push(i[c].src);this._url=i.length>0?a:[e.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var w=j("source");w.src=this._url[m],e.appendChild(w)}}});function yh(t,e,i){return new yo(t,e,i)}var wo=vn.extend({_initImage:function(){var t=this._image=this._url;F(t,"leaflet-image-layer"),this._zoomAnimated&&F(t,"leaflet-zoom-animated"),this.options.className&&F(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function wh(t,e,i){return new wo(t,e,i)}var Bt=Ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof q||O(t))?(this._latlng=$(t),C(this,e)):(C(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&wt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&wt(this._container,1),this.bringToFront(),this.options.interactive&&(F(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(wt(this._container,0),this._removeTimeout=setTimeout(h(it,void 0,this._container),200)):it(this._container),this.options.interactive&&(ot(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=$(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ae(this._container),this},bringToBack:function(){return this._map&&he(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Dt){e=null;var i=this._source._layers;for(var a in i)if(i[a]._map){e=i[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=Z(this.options.offset),i=this._getAnchor();this._zoomAnimated?st(this._container,t.add(i)):e=e.add(t).add(i);var a=this._containerBottom=-e.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});U.include({_initOverlay:function(t,e,i,a){var c=e;return c instanceof t||(c=new t(a).setContent(e)),i&&c.setLatLng(i),c}}),Ct.include({_initOverlay:function(t,e,i,a){var c=i;return c instanceof t?(C(c,a),c._source=this):(c=e&&!a?e:new t(a,this),c.setContent(i)),c}});var yn=Bt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Bt.prototype.openOn.call(this,t)},onAdd:function(t){Bt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qt||this._source.on("preclick",Jt))},onRemove:function(t){Bt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qt||this._source.off("preclick",Jt))},getEvents:function(){var t=Bt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=j("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=j("div",t+"-content-wrapper",e);if(this._contentNode=j("div",t+"-content",i),Ae(e),wi(this._contentNode),D(e,"contextmenu",Jt),this._tipContainer=j("div",t+"-tip-container",e),this._tip=j("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=j("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',D(a,"click",function(c){lt(c),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,c=this.options.maxHeight,m="leaflet-popup-scrolled";c&&a>c?(e.height=c+"px",F(t,m)):ot(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();st(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Me(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,a=this._containerWidth,c=new z(this._containerLeft,-i-this._containerBottom);c._add(Kt(this._container));var m=t.layerPointToContainerPoint(c),w=Z(this.options.autoPanPadding),x=Z(this.options.autoPanPaddingTopLeft||w),b=Z(this.options.autoPanPaddingBottomRight||w),k=t.getSize(),S=0,I=0;m.x+a+b.x>k.x&&(S=m.x+a-k.x+b.x),m.x-S-x.x<0&&(S=m.x-x.x),m.y+i+b.y>k.y&&(I=m.y+i-k.y+b.y),m.y-I-x.y<0&&(I=m.y-x.y),(S||I)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([S,I]))}},_getAnchor:function(){return Z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xh=function(t,e){return new yn(t,e)};U.mergeOptions({closePopupOnClick:!0}),U.include({openPopup:function(t,e,i){return this._initOverlay(yn,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ct.include({bindPopup:function(t,e){return this._popup=this._initOverlay(yn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Dt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Qt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof qt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var wn=Bt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Bt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Bt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Bt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=j("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,a=this._map,c=this._container,m=a.latLngToContainerPoint(a.getCenter()),w=a.layerPointToContainerPoint(t),x=this.options.direction,b=c.offsetWidth,k=c.offsetHeight,S=Z(this.options.offset),I=this._getAnchor();x==="top"?(e=b/2,i=k):x==="bottom"?(e=b/2,i=0):x==="center"?(e=b/2,i=k/2):x==="right"?(e=0,i=k/2):x==="left"?(e=b,i=k/2):w.x<m.x?(x="right",e=0,i=k/2):(x="left",e=b+(S.x+I.x)*2,i=k/2),t=t.subtract(Z(e,i,!0)).add(S).add(I),ot(c,"leaflet-tooltip-right"),ot(c,"leaflet-tooltip-left"),ot(c,"leaflet-tooltip-top"),ot(c,"leaflet-tooltip-bottom"),F(c,"leaflet-tooltip-"+x),st(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&wt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return Z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Lh=function(t,e){return new wn(t,e)};U.include({openTooltip:function(t,e,i){return this._initOverlay(wn,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ct.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wn,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Dt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(D(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),D(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,a;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var xo=le.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(sn(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var a=Z(i.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ph(t){return new xo(t)}le.Default=ze;var Ie=Ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:A.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){C(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),it(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(he(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof z?t:new z(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),a=0,c=e.length,m;a<c;a++)m=e[a].style.zIndex,e[a]!==this._container&&m&&(i=t(i,+m));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!A.ielt9){wt(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var a in this._tiles){var c=this._tiles[a];if(!(!c.current||!c.loaded)){var m=Math.min(1,(t-c.loaded)/200);wt(c.el,m),m<1?e=!0:(c.active?i=!0:this._onOpaqueTile(c),c.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(R(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=j("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(it(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var a=this._levels[t],c=this._map;return a||(a=this._levels[t]={},a.el=j("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,c.getCenter(),c.getZoom()),g(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)it(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,a){var c=Math.floor(t/2),m=Math.floor(e/2),w=i-1,x=new z(+c,+m);x.z=+w;var b=this._tileCoordsToKey(x),k=this._tiles[b];return k&&k.active?(k.retain=!0,!0):(k&&k.loaded&&(k.retain=!0),w>a?this._retainParent(c,m,w,a):!1)},_retainChildren:function(t,e,i,a){for(var c=2*t;c<2*t+2;c++)for(var m=2*e;m<2*e+2;m++){var w=new z(c,m);w.z=i+1;var x=this._tileCoordsToKey(w),b=this._tiles[x];if(b&&b.active){b.retain=!0;continue}else b&&b.loaded&&(b.retain=!0);i+1<a&&this._retainChildren(c,m,i+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,a){var c=Math.round(e);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var m=this.options.updateWhenZooming&&c!==this._tileZoom;(!a||m)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var a=this._map.getZoomScale(i,t.zoom),c=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,i)).round();A.any3d?Yt(t.el,c,a):st(t.el,c)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),a=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(i,this._tileZoom),c=e.project(t,this._tileZoom).floor(),m=e.getSize().divideBy(a*2);return new K(c.subtract(m),c.add(m))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(a),m=c.getCenter(),w=[],x=this.options.keepBuffer,b=new K(c.getBottomLeft().subtract([x,-x]),c.getTopRight().add([x,-x]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var k in this._tiles){var S=this._tiles[k].coords;(S.z!==this._tileZoom||!b.contains(new z(S.x,S.y)))&&(this._tiles[k].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var I=c.min.y;I<=c.max.y;I++)for(var H=c.min.x;H<=c.max.x;H++){var pt=new z(H,I);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var ut=this._tiles[this._tileCoordsToKey(pt)];ut?ut.current=!0:w.push(pt)}}if(w.sort(function(mt,_e){return mt.distanceTo(m)-_e.distanceTo(m)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Lt=document.createDocumentFragment();for(H=0;H<w.length;H++)this._addTile(w[H],Lt);this._level.el.appendChild(Lt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return et(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),a=t.scaleBy(i),c=a.add(i),m=e.unproject(a,t.z),w=e.unproject(c,t.z);return[m,w]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new ft(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new z(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(it(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){F(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=g,t.onmousemove=g,A.ielt9&&this.options.opacity<1&&wt(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),a=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),h(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&E(h(this._tileReady,this,t,null,c)),st(c,i),this._tiles[a]={el:c,coords:t,current:!0},e.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var a=this._tileCoordsToKey(t);i=this._tiles[a],i&&(i.loaded=+new Date,this._map._fadeAnimated?(wt(i.el,0),R(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(F(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),A.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new z(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new K(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function bh(t){return new Ie(t)}var de=Ie.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=C(this,e),e.detectRetina&&A.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return D(i,"load",h(this._tileOnLoad,this,e,i)),D(i,"error",h(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:A.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return B(this._url,l(e,this.options))},_tileOnLoad:function(t,e){A.ielt9?setTimeout(h(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,a=this.options.zoomOffset;return i&&(t=e-t),t+a},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=g,e.onerror=g,!e.complete)){e.src=N;var i=this._tiles[t].coords;it(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",N),Ie.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===N))return Ie.prototype._tileReady.call(this,t,e,i)}});function Lo(t,e){return new de(t,e)}var Po=de.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=l({},this.defaultWmsParams);for(var a in e)a in this.options||(i[a]=e[a]);e=C(this,e);var c=e.detectRetina&&A.retina?2:1,m=this.getTileSize();i.width=m.x*c,i.height=m.y*c,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,de.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,a=ct(i.project(e[0]),i.project(e[1])),c=a.min,m=a.max,w=(this._wmsVersion>=1.3&&this._crs===po?[c.y,c.x,m.y,m.x]:[c.x,c.y,m.x,m.y]).join(","),x=de.prototype.getTileUrl.call(this,t);return x+M(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(t,e){return l(this.wmsParams,t),e||this.redraw(),this}});function Ch(t,e){return new Po(t,e)}de.WMS=Po,Lo.wms=Ch;var Gt=Ct.extend({options:{padding:.1},initialize:function(t){C(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),F(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,e),m=a.multiplyBy(-i).add(c).subtract(this._map._getNewPixelOrigin(t,e));A.any3d?Yt(this._container,m,i):st(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new K(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bo=Gt.extend({options:{tolerance:0},getEvents:function(){var t=Gt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");D(t,"mousemove",this._onMouseMove,this),D(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),D(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,it(this._container),J(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gt.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),a=A.retina?2:1;st(e,t.min),e.width=a*i.x,e.height=a*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",A.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Gt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,a=e.prev;i?i.prev=a:this._drawLast=a,a?a.next=i:this._drawFirst=i,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],a,c;for(c=0;c<e.length;c++){if(a=Number(e[c]),isNaN(a))return;i.push(a)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,a,c,m,w=t._parts,x=w.length,b=this._ctx;if(x){for(b.beginPath(),i=0;i<x;i++){for(a=0,c=w[i].length;a<c;a++)m=w[i][a],b[a?"lineTo":"moveTo"](m.x,m.y);e&&b.closePath()}this._fillStroke(b,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,a=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||a)/a;c!==1&&(i.save(),i.scale(1,c)),i.beginPath(),i.arc(e.x,e.y/c,a,0,Math.PI*2,!1),c!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,a,c=this._drawFirst;c;c=c.next)i=c.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(a=i);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ot(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,a,c=this._drawFirst;c;c=c.next)i=c.layer,i.options.interactive&&i._containsPoint(e)&&(a=i);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(F(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;if(i)i.prev=a;else return;a?a.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;if(a)a.next=i;else return;i?i.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Co(t){return A.canvas?new bo(t):null}var Ne=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),kh={_initContainer:function(){this._container=j("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ne("shape");F(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ne("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;it(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,a=t.options,c=t._container;c.stroked=!!a.stroke,c.filled=!!a.fill,a.stroke?(e||(e=t._stroke=Ne("stroke")),c.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=O(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(c.removeChild(e),t._stroke=null),a.fill?(i||(i=t._fill=Ne("fill")),c.appendChild(i),i.color=a.fillColor||a.color,i.opacity=a.fillOpacity):i&&(c.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),a=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+a+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ae(t._container)},_bringToBack:function(t){he(t._container)}},xn=A.vml?Ne:Tr,Ze=Gt.extend({_initContainer:function(){this._container=xn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){it(this._container),J(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),st(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=xn("path");t.options.className&&F(e,t.options.className),t.options.interactive&&F(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){it(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Sr(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||i,c="a"+i+","+a+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+c+i*2+",0 "+c+-i*2+",0 ";this._setPath(t,m)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ae(t._path)},_bringToBack:function(t){he(t._path)}});A.vml&&Ze.include(kh);function ko(t){return A.svg||A.vml?new Ze(t):null}U.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||ko(t)}});var Mo=ce.extend({initialize:function(t,e){ce.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=et(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Mh(t,e){return new Mo(t,e)}Ze.create=xn,Ze.pointsToPath=Sr,Ht.geometryToLayer=_n,Ht.coordsToLatLng=Si,Ht.coordsToLatLngs=pn,Ht.latLngToCoords=Ei,Ht.latLngsToCoords=mn,Ht.getFeature=fe,Ht.asFeature=gn,U.mergeOptions({boxZoom:!0});var To=Ot.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){D(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){it(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Te(),fi(),this._startPoint=this._map.mouseEventToContainerPoint(t),D(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=j("div","leaflet-zoom-box",this._container),F(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new K(this._point,this._startPoint),i=e.getSize();st(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(it(this._box),ot(this._container,"leaflet-crosshair")),Se(),di(),J(document,{contextmenu:Qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var e=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});U.addInitHook("addHandler","boxZoom",To),U.mergeOptions({doubleClickZoom:!0});var So=Ot.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),a=e.options.zoomDelta,c=t.originalEvent.shiftKey?i-a:i+a;e.options.doubleClickZoom==="center"?e.setZoom(c):e.setZoomAround(t.containerPoint,c)}});U.addInitHook("addHandler","doubleClickZoom",So),U.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Eo=Ot.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Vt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}F(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ot(this._map._container,"leaflet-grab"),ot(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=et(this._map.options.maxBounds);this._offsetLimit=ct(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,a=this._draggable._newPos.x,c=(a-e+i)%t+e-i,m=(a+e+i)%t-e-i,w=Math.abs(c+i)<Math.abs(m+i)?c:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(t){var e=this._map,i=e.options,a=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,w=i.easeLinearity,x=c.multiplyBy(w/m),b=x.distanceTo([0,0]),k=Math.min(i.inertiaMaxSpeed,b),S=x.multiplyBy(k/b),I=k/(i.inertiaDeceleration*w),H=S.multiplyBy(-I/2).round();!H.x&&!H.y?e.fire("moveend"):(H=e._limitOffset(H,e.options.maxBounds),E(function(){e.panBy(H,{duration:I,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});U.addInitHook("addHandler","dragging",Eo),U.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ao=Ot.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),D(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),J(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,a,c;for(a=0,c=i.left.length;a<c;a++)e[i.left[a]]=[-1*t,0];for(a=0,c=i.right.length;a<c;a++)e[i.right[a]]=[t,0];for(a=0,c=i.down.length;a<c;a++)e[i.down[a]]=[0,t];for(a=0,c=i.up.length;a<c;a++)e[i.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,a,c;for(a=0,c=i.zoomIn.length;a<c;a++)e[i.zoomIn[a]]=t;for(a=0,c=i.zoomOut.length;a<c;a++)e[i.zoomOut[a]]=-t},_addHooks:function(){D(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){J(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,a;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(a=this._panKeys[e],t.shiftKey&&(a=Z(a).multiplyBy(3)),i.options.maxBounds&&(a=i._limitOffset(Z(a),i.options.maxBounds)),i.options.worldCopyJump){var c=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(a)));i.panTo(c)}else i.panBy(a)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Qt(t)}}});U.addInitHook("addHandler","keyboard",Ao),U.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Oo=Ot.extend({addHooks:function(){D(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=eo(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),a),Qt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,m=i?Math.ceil(c/i)*i:c,w=t._limitZoom(e+(this._delta>0?m:-m))-e;this._delta=0,this._startTime=null,w&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+w):t.setZoomAround(this._lastMousePos,e+w))}});U.addInitHook("addHandler","scrollWheelZoom",Oo);var Th=600;U.mergeOptions({tapHold:A.touchNative&&A.safari&&A.mobile,tapTolerance:15});var Bo=Ot.extend({addHooks:function(){D(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new z(e.clientX,e.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(D(document,"touchend",lt),D(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),Th),D(document,"touchend touchcancel contextmenu",this._cancel,this),D(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){J(document,"touchend",lt),J(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new z(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});U.addInitHook("addHandler","tapHold",Bo),U.mergeOptions({touchZoom:A.touch,bounceAtZoomLimits:!0});var zo=Ot.extend({addHooks:function(){F(this._map._container,"leaflet-touch-zoom"),D(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ot(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(a)._divideBy(2))),this._startDist=i.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),D(document,"touchmove",this._onTouchMove,this),D(document,"touchend touchcancel",this._onTouchEnd,this),lt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),c=i.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(c,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&c<1||this._zoom>e.getMaxZoom()&&c>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var m=i._add(a)._divideBy(2)._subtract(this._centerPoint);if(c===1&&m.x===0&&m.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var w=h(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(w,this,!0),lt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});U.addInitHook("addHandler","touchZoom",zo),U.BoxZoom=To,U.DoubleClickZoom=So,U.Drag=Eo,U.Keyboard=Ao,U.ScrollWheelZoom=Oo,U.TapHold=Bo,U.TouchZoom=zo,s.Bounds=K,s.Browser=A,s.CRS=Rt,s.Canvas=bo,s.Circle=Ti,s.CircleMarker=dn,s.Class=W,s.Control=bt,s.DivIcon=xo,s.DivOverlay=Bt,s.DomEvent=Va,s.DomUtil=Ua,s.Draggable=Vt,s.Evented=tt,s.FeatureGroup=Dt,s.GeoJSON=Ht,s.GridLayer=Ie,s.Handler=Ot,s.Icon=le,s.ImageOverlay=vn,s.LatLng=q,s.LatLngBounds=ft,s.Layer=Ct,s.LayerGroup=ue,s.LineUtil=oh,s.Map=U,s.Marker=fn,s.Mixin=Qa,s.Path=qt,s.Point=z,s.PolyUtil=th,s.Polygon=ce,s.Polyline=Ft,s.Popup=yn,s.PosAnimation=no,s.Projection=sh,s.Rectangle=Mo,s.Renderer=Gt,s.SVG=Ze,s.SVGOverlay=wo,s.TileLayer=de,s.Tooltip=wn,s.Transformation=ti,s.Util=G,s.VideoOverlay=yo,s.bind=h,s.bounds=ct,s.canvas=Co,s.circle=_h,s.circleMarker=dh,s.control=Oe,s.divIcon=Ph,s.extend=l,s.featureGroup=lh,s.geoJSON=vo,s.geoJson=gh,s.gridLayer=bh,s.icon=ch,s.imageOverlay=vh,s.latLng=$,s.latLngBounds=et,s.layerGroup=uh,s.map=qa,s.marker=fh,s.point=Z,s.polygon=mh,s.polyline=ph,s.popup=xh,s.rectangle=Mh,s.setOptions=C,s.stamp=d,s.svg=ko,s.svgOverlay=wh,s.tileLayer=Lo,s.tooltip=Lh,s.transformation=be,s.version=u,s.videoOverlay=yh;var Sh=window.L;s.noConflict=function(){return window.L=Sh,this},window.L=s})})(ds,ds.exports);var _s={exports:{}};(function(n,r){(function(s,u){u(r)})(ea,function(s){var u=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(o){L.Util.setOptions(this,o),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var h=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,h?this._withAnimation:this._noAnimation),this._markerCluster=h?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(o){if(o instanceof L.LayerGroup)return this.addLayers([o]);if(!o.getLatLng)return this._nonPointGroup.addLayer(o),this.fire("layeradd",{layer:o}),this;if(!this._map)return this._needsClustering.push(o),this.fire("layeradd",{layer:o}),this;if(this.hasLayer(o))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(o,this._maxZoom),this.fire("layeradd",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var h=o,f=this._zoom;if(o.__parent)for(;h.__parent._zoom>=f;)h=h.__parent;return this._currentShownBounds.contains(h.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(o,h):this._animationAddLayerNonAnimated(o,h)),this},removeLayer:function(o){return o instanceof L.LayerGroup?this.removeLayers([o]):o.getLatLng?this._map?o.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(o)),this._removeLayer(o,!0),this.fire("layerremove",{layer:o}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),o.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(o)&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,o)&&this.hasLayer(o)&&this._needsRemoving.push({layer:o,latlng:o._latlng}),this.fire("layerremove",{layer:o}),this):(this._nonPointGroup.removeLayer(o),this.fire("layerremove",{layer:o}),this)},addLayers:function(o,h){if(!L.Util.isArray(o))return this.addLayer(o);var f=this._featureGroup,d=this._nonPointGroup,_=this.options.chunkedLoading,v=this.options.chunkInterval,g=this.options.chunkProgress,p=o.length,y=0,P=!0,C;if(this._map){var M=new Date().getTime(),T=L.bind(function(){var O=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();y<p;y++){if(_&&y%200===0){var Y=new Date().getTime()-O;if(Y>v)break}if(C=o[y],C instanceof L.LayerGroup){P&&(o=o.slice(),P=!1),this._extractNonGroupLayers(C,o),p=o.length;continue}if(!C.getLatLng){d.addLayer(C),h||this.fire("layeradd",{layer:C});continue}if(!this.hasLayer(C)&&(this._addLayer(C,this._maxZoom),h||this.fire("layeradd",{layer:C}),C.__parent&&C.__parent.getChildCount()===2)){var N=C.__parent.getAllChildMarkers(),V=N[0]===C?N[1]:N[0];f.removeLayer(V)}}g&&g(y,p,new Date().getTime()-M),y===p?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(T,this.options.chunkDelay)},this);T()}else for(var B=this._needsClustering;y<p;y++){if(C=o[y],C instanceof L.LayerGroup){P&&(o=o.slice(),P=!1),this._extractNonGroupLayers(C,o),p=o.length;continue}if(!C.getLatLng){d.addLayer(C);continue}this.hasLayer(C)||B.push(C)}return this},removeLayers:function(o){var h,f,d=o.length,_=this._featureGroup,v=this._nonPointGroup,g=!0;if(!this._map){for(h=0;h<d;h++){if(f=o[h],f instanceof L.LayerGroup){g&&(o=o.slice(),g=!1),this._extractNonGroupLayers(f,o),d=o.length;continue}this._arraySplice(this._needsClustering,f),v.removeLayer(f),this.hasLayer(f)&&this._needsRemoving.push({layer:f,latlng:f._latlng}),this.fire("layerremove",{layer:f})}return this}if(this._unspiderfy){this._unspiderfy();var p=o.slice(),y=d;for(h=0;h<y;h++){if(f=p[h],f instanceof L.LayerGroup){this._extractNonGroupLayers(f,p),y=p.length;continue}this._unspiderfyLayer(f)}}for(h=0;h<d;h++){if(f=o[h],f instanceof L.LayerGroup){g&&(o=o.slice(),g=!1),this._extractNonGroupLayers(f,o),d=o.length;continue}if(!f.__parent){v.removeLayer(f),this.fire("layerremove",{layer:f});continue}this._removeLayer(f,!0,!0),this.fire("layerremove",{layer:f}),_.hasLayer(f)&&(_.removeLayer(f),f.clusterShow&&f.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(o){o.off(this._childMarkerEventHandlers,this),delete o.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var o=new L.LatLngBounds;this._topClusterLevel&&o.extend(this._topClusterLevel._bounds);for(var h=this._needsClustering.length-1;h>=0;h--)o.extend(this._needsClustering[h].getLatLng());return o.extend(this._nonPointGroup.getBounds()),o},eachLayer:function(o,h){var f=this._needsClustering.slice(),d=this._needsRemoving,_,v,g;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(f),v=f.length-1;v>=0;v--){for(_=!0,g=d.length-1;g>=0;g--)if(d[g].layer===f[v]){_=!1;break}_&&o.call(h,f[v])}this._nonPointGroup.eachLayer(o,h)},getLayers:function(){var o=[];return this.eachLayer(function(h){o.push(h)}),o},getLayer:function(o){var h=null;return o=parseInt(o,10),this.eachLayer(function(f){L.stamp(f)===o&&(h=f)}),h},hasLayer:function(o){if(!o)return!1;var h,f=this._needsClustering;for(h=f.length-1;h>=0;h--)if(f[h]===o)return!0;for(f=this._needsRemoving,h=f.length-1;h>=0;h--)if(f[h].layer===o)return!1;return!!(o.__parent&&o.__parent._group===this)||this._nonPointGroup.hasLayer(o)},zoomToShowLayer:function(o,h){var f=this._map;typeof h!="function"&&(h=function(){});var d=function(){(f.hasLayer(o)||f.hasLayer(o.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),f.hasLayer(o)?h():o.__parent._icon&&(this.once("spiderfied",h,this),o.__parent.spiderfy()))};o._icon&&this._map.getBounds().contains(o.getLatLng())?h():o.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(o.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),o.__parent.zoomToBounds())},onAdd:function(o){this._map=o;var h,f,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(o),this._nonPointGroup.addTo(o),this._gridClusters||this._generateInitialClusters(),this._maxLat=o.options.crs.projection.MAX_LATITUDE,h=0,f=this._needsRemoving.length;h<f;h++)d=this._needsRemoving[h],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(h=0,f=this._needsRemoving.length;h<f;h++)d=this._needsRemoving[h],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),f=this._needsClustering,this._needsClustering=[],this.addLayers(f,!0)},onRemove:function(o){o.off("zoomend",this._zoomEnd,this),o.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(o){for(var h=o;h&&!h._icon;)h=h.__parent;return h||null},_arraySplice:function(o,h){for(var f=o.length-1;f>=0;f--)if(o[f]===h)return o.splice(f,1),!0},_removeFromGridUnclustered:function(o,h){for(var f=this._map,d=this._gridUnclustered,_=Math.floor(this._map.getMinZoom());h>=_&&d[h].removeObject(o,f.project(o.getLatLng(),h));h--);},_childMarkerDragStart:function(o){o.target.__dragStart=o.target._latlng},_childMarkerMoved:function(o){if(!this._ignoreMove&&!o.target.__dragStart){var h=o.target._popup&&o.target._popup.isOpen();this._moveChild(o.target,o.oldLatLng,o.latlng),h&&o.target.openPopup()}},_moveChild:function(o,h,f){o._latlng=h,this.removeLayer(o),o._latlng=f,this.addLayer(o)},_childMarkerDragEnd:function(o){var h=o.target.__dragStart;delete o.target.__dragStart,h&&this._moveChild(o.target,h,o.target._latlng)},_removeLayer:function(o,h,f){var d=this._gridClusters,_=this._gridUnclustered,v=this._featureGroup,g=this._map,p=Math.floor(this._map.getMinZoom());h&&this._removeFromGridUnclustered(o,this._maxZoom);var y=o.__parent,P=y._markers,C;for(this._arraySplice(P,o);y&&(y._childCount--,y._boundsNeedUpdate=!0,!(y._zoom<p));)h&&y._childCount<=1?(C=y._markers[0]===o?y._markers[1]:y._markers[0],d[y._zoom].removeObject(y,g.project(y._cLatLng,y._zoom)),_[y._zoom].addObject(C,g.project(C.getLatLng(),y._zoom)),this._arraySplice(y.__parent._childClusters,y),y.__parent._markers.push(C),C.__parent=y.__parent,y._icon&&(v.removeLayer(y),f||v.addLayer(C))):y._iconNeedsUpdate=!0,y=y.__parent;delete o.__parent},_isOrIsParent:function(o,h){for(;h;){if(o===h)return!0;h=h.parentNode}return!1},fire:function(o,h,f){if(h&&h.layer instanceof L.MarkerCluster){if(h.originalEvent&&this._isOrIsParent(h.layer._icon,h.originalEvent.relatedTarget))return;o="cluster"+o}L.FeatureGroup.prototype.fire.call(this,o,h,f)},listens:function(o,h){return L.FeatureGroup.prototype.listens.call(this,o,h)||L.FeatureGroup.prototype.listens.call(this,"cluster"+o,h)},_defaultIconCreateFunction:function(o){var h=o.getChildCount(),f=" marker-cluster-";return h<10?f+="small":h<100?f+="medium":f+="large",new L.DivIcon({html:"<div><span>"+h+"</span></div>",className:"marker-cluster"+f,iconSize:new L.Point(40,40)})},_bindEvents:function(){var o=this._map,h=this.options.spiderfyOnMaxZoom,f=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,_=this.options.spiderfyOnEveryZoom;(h||d||_)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),f&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),o.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(o){var h=o.layer,f=h;if(!(o.type==="clusterkeypress"&&o.originalEvent&&o.originalEvent.keyCode!==13)){for(;f._childClusters.length===1;)f=f._childClusters[0];f._zoom===this._maxZoom&&f._childCount===h._childCount&&this.options.spiderfyOnMaxZoom?h.spiderfy():this.options.zoomToBoundsOnClick&&h.zoomToBounds(),this.options.spiderfyOnEveryZoom&&h.spiderfy(),o.originalEvent&&o.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(o){var h=this._map;this._inZoomAnimation||(this._shownPolygon&&h.removeLayer(this._shownPolygon),o.layer.getChildCount()>2&&o.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(o.layer.getConvexHull(),this.options.polygonOptions),h.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var o=this.options.spiderfyOnMaxZoom,h=this.options.showCoverageOnHover,f=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,_=this._map;(o||f||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),h&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),_.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var o=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,o),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),o),this._currentShownBounds=o}},_generateInitialClusters:function(){var o=Math.ceil(this._map.getMaxZoom()),h=Math.floor(this._map.getMinZoom()),f=this.options.maxClusterRadius,d=f;typeof f!="function"&&(d=function(){return f}),this.options.disableClusteringAtZoom!==null&&(o=this.options.disableClusteringAtZoom-1),this._maxZoom=o,this._gridClusters={},this._gridUnclustered={};for(var _=o;_>=h;_--)this._gridClusters[_]=new L.DistanceGrid(d(_)),this._gridUnclustered[_]=new L.DistanceGrid(d(_));this._topClusterLevel=new this._markerCluster(this,h-1)},_addLayer:function(o,h){var f=this._gridClusters,d=this._gridUnclustered,_=Math.floor(this._map.getMinZoom()),v,g;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(o),o.on(this._childMarkerEventHandlers,this);h>=_;h--){v=this._map.project(o.getLatLng(),h);var p=f[h].getNearObject(v);if(p){p._addChild(o),o.__parent=p;return}if(p=d[h].getNearObject(v),p){var y=p.__parent;y&&this._removeLayer(p,!1);var P=new this._markerCluster(this,h,p,o);f[h].addObject(P,this._map.project(P._cLatLng,h)),p.__parent=P,o.__parent=P;var C=P;for(g=h-1;g>y._zoom;g--)C=new this._markerCluster(this,g,C),f[g].addObject(C,this._map.project(p.getLatLng(),g));y._addChild(C),this._removeFromGridUnclustered(p,h);return}d[h].addObject(o,v)}this._topClusterLevel._addChild(o),o.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(o){o instanceof L.MarkerCluster&&o._iconNeedsUpdate&&o._updateIcon()})},_enqueue:function(o){this._queue.push(o),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var o=0;o<this._queue.length;o++)this._queue[o].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var o=Math.round(this._map._zoom);this._processQueue(),this._zoom<o&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,o)):this._zoom>o?(this._animationStart(),this._animationZoomOut(this._zoom,o)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(o){var h=this._maxLat;return h!==void 0&&(o.getNorth()>=h&&(o._northEast.lat=1/0),o.getSouth()<=-h&&(o._southWest.lat=-1/0)),o},_animationAddLayerNonAnimated:function(o,h){if(h===o)this._featureGroup.addLayer(o);else if(h._childCount===2){h._addToMap();var f=h.getAllChildMarkers();this._featureGroup.removeLayer(f[0]),this._featureGroup.removeLayer(f[1])}else h._updateIcon()},_extractNonGroupLayers:function(o,h){var f=o.getLayers(),d=0,_;for(h=h||[];d<f.length;d++){if(_=f[d],_ instanceof L.LayerGroup){this._extractNonGroupLayers(_,h);continue}h.push(_)}return h},_overrideMarkerIcon:function(o){var h=o.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[o]}});return h}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(o,h){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(o,h){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(o,h){this._animationAddLayerNonAnimated(o,h)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(o,h){var f=this._getExpandedVisibleBounds(),d=this._featureGroup,_=Math.floor(this._map.getMinZoom()),v;this._ignoreMove=!0,this._topClusterLevel._recursively(f,o,_,function(g){var p=g._latlng,y=g._markers,P;for(f.contains(p)||(p=null),g._isSingleParent()&&o+1===h?(d.removeLayer(g),g._recursivelyAddChildrenToMap(null,h,f)):(g.clusterHide(),g._recursivelyAddChildrenToMap(p,h,f)),v=y.length-1;v>=0;v--)P=y[v],f.contains(P._latlng)||d.removeLayer(P)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(f,h),d.eachLayer(function(g){!(g instanceof L.MarkerCluster)&&g._icon&&g.clusterShow()}),this._topClusterLevel._recursively(f,o,h,function(g){g._recursivelyRestoreChildPositions(h)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(f,o,_,function(g){d.removeLayer(g),g.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(o,h){this._animationZoomOutSingle(this._topClusterLevel,o-1,h),this._topClusterLevel._recursivelyAddChildrenToMap(null,h,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),o,this._getExpandedVisibleBounds())},_animationAddLayer:function(o,h){var f=this,d=this._featureGroup;d.addLayer(o),h!==o&&(h._childCount>2?(h._updateIcon(),this._forceLayout(),this._animationStart(),o._setPos(this._map.latLngToLayerPoint(h.getLatLng())),o.clusterHide(),this._enqueue(function(){d.removeLayer(o),o.clusterShow(),f._animationEnd()})):(this._forceLayout(),f._animationStart(),f._animationZoomOutSingle(h,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(o,h,f){var d=this._getExpandedVisibleBounds(),_=Math.floor(this._map.getMinZoom());o._recursivelyAnimateChildrenInAndAddSelfToMap(d,_,h+1,f);var v=this;this._forceLayout(),o._recursivelyBecomeVisible(d,f),this._enqueue(function(){if(o._childCount===1){var g=o._markers[0];this._ignoreMove=!0,g.setLatLng(g.getLatLng()),this._ignoreMove=!1,g.clusterShow&&g.clusterShow()}else o._recursively(d,f,_,function(p){p._recursivelyRemoveChildrenFromMap(d,_,h+1)});v._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(o){return new L.MarkerClusterGroup(o)};var l=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(o,h,f,d){L.Marker.prototype.initialize.call(this,f?f._cLatLng||f.getLatLng():new L.LatLng(0,0),{icon:this,pane:o.options.clusterPane}),this._group=o,this._zoom=h,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,f&&this._addChild(f),d&&this._addChild(d)},getAllChildMarkers:function(o,h){o=o||[];for(var f=this._childClusters.length-1;f>=0;f--)this._childClusters[f].getAllChildMarkers(o,h);for(var d=this._markers.length-1;d>=0;d--)h&&this._markers[d].__dragStart||o.push(this._markers[d]);return o},getChildCount:function(){return this._childCount},zoomToBounds:function(o){for(var h=this._childClusters.slice(),f=this._group._map,d=f.getBoundsZoom(this._bounds),_=this._zoom+1,v=f.getZoom(),g;h.length>0&&d>_;){_++;var p=[];for(g=0;g<h.length;g++)p=p.concat(h[g]._childClusters);h=p}d>_?this._group._map.setView(this._latlng,_):d<=v?this._group._map.setView(this._latlng,v+1):this._group._map.fitBounds(this._bounds,o)},getBounds:function(){var o=new L.LatLngBounds;return o.extend(this._bounds),o},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(o,h){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(o),o instanceof L.MarkerCluster?(h||(this._childClusters.push(o),o.__parent=this),this._childCount+=o._childCount):(h||this._markers.push(o),this._childCount++),this.__parent&&this.__parent._addChild(o,!0)},_setClusterCenter:function(o){this._cLatLng||(this._cLatLng=o._cLatLng||o._latlng)},_resetBounds:function(){var o=this._bounds;o._southWest&&(o._southWest.lat=1/0,o._southWest.lng=1/0),o._northEast&&(o._northEast.lat=-1/0,o._northEast.lng=-1/0)},_recalculateBounds:function(){var o=this._markers,h=this._childClusters,f=0,d=0,_=this._childCount,v,g,p,y;if(_!==0){for(this._resetBounds(),v=0;v<o.length;v++)p=o[v]._latlng,this._bounds.extend(p),f+=p.lat,d+=p.lng;for(v=0;v<h.length;v++)g=h[v],g._boundsNeedUpdate&&g._recalculateBounds(),this._bounds.extend(g._bounds),p=g._wLatLng,y=g._childCount,f+=p.lat*y,d+=p.lng*y;this._latlng=this._wLatLng=new L.LatLng(f/_,d/_),this._boundsNeedUpdate=!1}},_addToMap:function(o){o&&(this._backupLatlng=this._latlng,this.setLatLng(o)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(o,h,f){this._recursively(o,this._group._map.getMinZoom(),f-1,function(d){var _=d._markers,v,g;for(v=_.length-1;v>=0;v--)g=_[v],g._icon&&(g._setPos(h),g.clusterHide())},function(d){var _=d._childClusters,v,g;for(v=_.length-1;v>=0;v--)g=_[v],g._icon&&(g._setPos(h),g.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(o,h,f,d){this._recursively(o,d,h,function(_){_._recursivelyAnimateChildrenIn(o,_._group._map.latLngToLayerPoint(_.getLatLng()).round(),f),_._isSingleParent()&&f-1===d?(_.clusterShow(),_._recursivelyRemoveChildrenFromMap(o,h,f)):_.clusterHide(),_._addToMap()})},_recursivelyBecomeVisible:function(o,h){this._recursively(o,this._group._map.getMinZoom(),h,null,function(f){f.clusterShow()})},_recursivelyAddChildrenToMap:function(o,h,f){this._recursively(f,this._group._map.getMinZoom()-1,h,function(d){if(h!==d._zoom)for(var _=d._markers.length-1;_>=0;_--){var v=d._markers[_];f.contains(v._latlng)&&(o&&(v._backupLatlng=v.getLatLng(),v.setLatLng(o),v.clusterHide&&v.clusterHide()),d._group._featureGroup.addLayer(v))}},function(d){d._addToMap(o)})},_recursivelyRestoreChildPositions:function(o){for(var h=this._markers.length-1;h>=0;h--){var f=this._markers[h];f._backupLatlng&&(f.setLatLng(f._backupLatlng),delete f._backupLatlng)}if(o-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var _=this._childClusters.length-1;_>=0;_--)this._childClusters[_]._recursivelyRestoreChildPositions(o)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(o,h,f,d){var _,v;this._recursively(o,h-1,f-1,function(g){for(v=g._markers.length-1;v>=0;v--)_=g._markers[v],(!d||!d.contains(_._latlng))&&(g._group._featureGroup.removeLayer(_),_.clusterShow&&_.clusterShow())},function(g){for(v=g._childClusters.length-1;v>=0;v--)_=g._childClusters[v],(!d||!d.contains(_._latlng))&&(g._group._featureGroup.removeLayer(_),_.clusterShow&&_.clusterShow())})},_recursively:function(o,h,f,d,_){var v=this._childClusters,g=this._zoom,p,y;if(h<=g&&(d&&d(this),_&&g===f&&_(this)),g<h||g<f)for(p=v.length-1;p>=0;p--)y=v[p],y._boundsNeedUpdate&&y._recalculateBounds(),o.intersects(y._bounds)&&y._recursively(o,h,f,d,_)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var o=this.options.opacity;return this.setOpacity(0),this.options.opacity=o,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(o){this._cellSize=o,this._sqCellSize=o*o,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(o,h){var f=this._getCoord(h.x),d=this._getCoord(h.y),_=this._grid,v=_[d]=_[d]||{},g=v[f]=v[f]||[],p=L.Util.stamp(o);this._objectPoint[p]=h,g.push(o)},updateObject:function(o,h){this.removeObject(o),this.addObject(o,h)},removeObject:function(o,h){var f=this._getCoord(h.x),d=this._getCoord(h.y),_=this._grid,v=_[d]=_[d]||{},g=v[f]=v[f]||[],p,y;for(delete this._objectPoint[L.Util.stamp(o)],p=0,y=g.length;p<y;p++)if(g[p]===o)return g.splice(p,1),y===1&&delete v[f],!0},eachObject:function(o,h){var f,d,_,v,g,p,y,P=this._grid;for(f in P){g=P[f];for(d in g)for(p=g[d],_=0,v=p.length;_<v;_++)y=o.call(h,p[_]),y&&(_--,v--)}},getNearObject:function(o){var h=this._getCoord(o.x),f=this._getCoord(o.y),d,_,v,g,p,y,P,C,M=this._objectPoint,T=this._sqCellSize,B=null;for(d=f-1;d<=f+1;d++)if(g=this._grid[d],g){for(_=h-1;_<=h+1;_++)if(p=g[_],p)for(v=0,y=p.length;v<y;v++)P=p[v],C=this._sqDist(M[L.Util.stamp(P)],o),(C<T||C<=T&&B===null)&&(T=C,B=P)}return B},_getCoord:function(o){var h=Math.floor(o/this._cellSize);return isFinite(h)?h:o},_sqDist:function(o,h){var f=h.x-o.x,d=h.y-o.y;return f*f+d*d}},function(){L.QuickHull={getDistant:function(o,h){var f=h[1].lat-h[0].lat,d=h[0].lng-h[1].lng;return d*(o.lat-h[0].lat)+f*(o.lng-h[0].lng)},findMostDistantPointFromBaseLine:function(o,h){var f=0,d=null,_=[],v,g,p;for(v=h.length-1;v>=0;v--){if(g=h[v],p=this.getDistant(g,o),p>0)_.push(g);else continue;p>f&&(f=p,d=g)}return{maxPoint:d,newPoints:_}},buildConvexHull:function(o,h){var f=[],d=this.findMostDistantPointFromBaseLine(o,h);return d.maxPoint?(f=f.concat(this.buildConvexHull([o[0],d.maxPoint],d.newPoints)),f=f.concat(this.buildConvexHull([d.maxPoint,o[1]],d.newPoints)),f):[o[0]]},getConvexHull:function(o){var h=!1,f=!1,d=!1,_=!1,v=null,g=null,p=null,y=null,P=null,C=null,M;for(M=o.length-1;M>=0;M--){var T=o[M];(h===!1||T.lat>h)&&(v=T,h=T.lat),(f===!1||T.lat<f)&&(g=T,f=T.lat),(d===!1||T.lng>d)&&(p=T,d=T.lng),(_===!1||T.lng<_)&&(y=T,_=T.lng)}f!==h?(C=g,P=v):(C=y,P=p);var B=[].concat(this.buildConvexHull([C,P],o),this.buildConvexHull([P,C],o));return B}}}(),L.MarkerCluster.include({getConvexHull:function(){var o=this.getAllChildMarkers(),h=[],f,d;for(d=o.length-1;d>=0;d--)f=o[d].getLatLng(),h.push(f);return L.QuickHull.getConvexHull(h)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var o=this.getAllChildMarkers(null,!0),h=this._group,f=h._map,d=f.latLngToLayerPoint(this._latlng),_;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?_=this._group.options.spiderfyShapePositions(o.length,d):o.length>=this._circleSpiralSwitchover?_=this._generatePointsSpiral(o.length,d):(d.y+=10,_=this._generatePointsCircle(o.length,d)),this._animationSpiderfy(o,_)}},unspiderfy:function(o){this._group._inZoomAnimation||(this._animationUnspiderfy(o),this._group._spiderfied=null)},_generatePointsCircle:function(o,h){var f=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+o),d=f/this._2PI,_=this._2PI/o,v=[],g,p;for(d=Math.max(d,35),v.length=o,g=0;g<o;g++)p=this._circleStartAngle+g*_,v[g]=new L.Point(h.x+d*Math.cos(p),h.y+d*Math.sin(p))._round();return v},_generatePointsSpiral:function(o,h){var f=this._group.options.spiderfyDistanceMultiplier,d=f*this._spiralLengthStart,_=f*this._spiralFootSeparation,v=f*this._spiralLengthFactor*this._2PI,g=0,p=[],y;for(p.length=o,y=o;y>=0;y--)y<o&&(p[y]=new L.Point(h.x+d*Math.cos(g),h.y+d*Math.sin(g))._round()),g+=_/d+y*5e-4,d+=v/g;return p},_noanimationUnspiderfy:function(){var o=this._group,h=o._map,f=o._featureGroup,d=this.getAllChildMarkers(null,!0),_,v;for(o._ignoreMove=!0,this.setOpacity(1),v=d.length-1;v>=0;v--)_=d[v],f.removeLayer(_),_._preSpiderfyLatlng&&(_.setLatLng(_._preSpiderfyLatlng),delete _._preSpiderfyLatlng),_.setZIndexOffset&&_.setZIndexOffset(0),_._spiderLeg&&(h.removeLayer(_._spiderLeg),delete _._spiderLeg);o.fire("unspiderfied",{cluster:this,markers:d}),o._ignoreMove=!1,o._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(o,h){var f=this._group,d=f._map,_=f._featureGroup,v=this._group.options.spiderLegPolylineOptions,g,p,y,P;for(f._ignoreMove=!0,g=0;g<o.length;g++)P=d.layerPointToLatLng(h[g]),p=o[g],y=new L.Polyline([this._latlng,P],v),d.addLayer(y),p._spiderLeg=y,p._preSpiderfyLatlng=p._latlng,p.setLatLng(P),p.setZIndexOffset&&p.setZIndexOffset(1e6),_.addLayer(p);this.setOpacity(.3),f._ignoreMove=!1,f.fire("spiderfied",{cluster:this,markers:o})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(o,h){var f=this,d=this._group,_=d._map,v=d._featureGroup,g=this._latlng,p=_.latLngToLayerPoint(g),y=L.Path.SVG,P=L.extend({},this._group.options.spiderLegPolylineOptions),C=P.opacity,M,T,B,O,Y,N;for(C===void 0&&(C=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),y?(P.opacity=0,P.className=(P.className||"")+" leaflet-cluster-spider-leg"):P.opacity=C,d._ignoreMove=!0,M=0;M<o.length;M++)T=o[M],N=_.layerPointToLatLng(h[M]),B=new L.Polyline([g,N],P),_.addLayer(B),T._spiderLeg=B,y&&(O=B._path,Y=O.getTotalLength()+.1,O.style.strokeDasharray=Y,O.style.strokeDashoffset=Y),T.setZIndexOffset&&T.setZIndexOffset(1e6),T.clusterHide&&T.clusterHide(),v.addLayer(T),T._setPos&&T._setPos(p);for(d._forceLayout(),d._animationStart(),M=o.length-1;M>=0;M--)N=_.layerPointToLatLng(h[M]),T=o[M],T._preSpiderfyLatlng=T._latlng,T.setLatLng(N),T.clusterShow&&T.clusterShow(),y&&(B=T._spiderLeg,O=B._path,O.style.strokeDashoffset=0,B.setStyle({opacity:C}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:f,markers:o})},200)},_animationUnspiderfy:function(o){var h=this,f=this._group,d=f._map,_=f._featureGroup,v=o?d._latLngToNewLayerPoint(this._latlng,o.zoom,o.center):d.latLngToLayerPoint(this._latlng),g=this.getAllChildMarkers(null,!0),p=L.Path.SVG,y,P,C,M,T,B;for(f._ignoreMove=!0,f._animationStart(),this.setOpacity(1),P=g.length-1;P>=0;P--)y=g[P],y._preSpiderfyLatlng&&(y.closePopup(),y.setLatLng(y._preSpiderfyLatlng),delete y._preSpiderfyLatlng,B=!0,y._setPos&&(y._setPos(v),B=!1),y.clusterHide&&(y.clusterHide(),B=!1),B&&_.removeLayer(y),p&&(C=y._spiderLeg,M=C._path,T=M.getTotalLength()+.1,M.style.strokeDashoffset=T,C.setStyle({opacity:0})));f._ignoreMove=!1,setTimeout(function(){var O=0;for(P=g.length-1;P>=0;P--)y=g[P],y._spiderLeg&&O++;for(P=g.length-1;P>=0;P--)y=g[P],y._spiderLeg&&(y.clusterShow&&y.clusterShow(),y.setZIndexOffset&&y.setZIndexOffset(0),O>1&&_.removeLayer(y),d.removeLayer(y._spiderLeg),delete y._spiderLeg);f._animationEnd(),f.fire("unspiderfied",{cluster:h,markers:g})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(o){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(o))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(o){this._spiderfied&&this._spiderfied.unspiderfy(o)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(o){o._spiderLeg&&(this._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow(),o.setZIndexOffset&&o.setZIndexOffset(0),this._map.removeLayer(o._spiderLeg),delete o._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(o){return o?o instanceof L.MarkerClusterGroup?o=o._topClusterLevel.getAllChildMarkers():o instanceof L.LayerGroup?o=o._layers:o instanceof L.MarkerCluster?o=o.getAllChildMarkers():o instanceof L.Marker&&(o=[o]):o=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(o),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(o),this},_flagParentsIconsNeedUpdate:function(o){var h,f;for(h in o)for(f=o[h].__parent;f;)f._iconNeedsUpdate=!0,f=f.__parent},_refreshSingleMarkerModeMarkers:function(o){var h,f;for(h in o)f=o[h],this.hasLayer(f)&&f.setIcon(this._overrideMarkerIcon(f))}}),L.Marker.include({refreshIconOptions:function(o,h){var f=this.options.icon;return L.setOptions(f,o),this.setIcon(f),h&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=u,s.MarkerCluster=l,Object.defineProperty(s,"__esModule",{value:!0})})})(_s,_s.exports);const Rd=n=>`${n.replace(/ National Parks?( and Preserve)?$/,"")}`,Xt=n=>n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),nr="#888d2a",ir="#6e66d4",Dd=[nr,ir,"#9AC2C9","#FA7921","#053B06","#FCFCFC","#E49273","#EE4266","#06D6A0","#08605F"],Fi=X("div#species-category-treemap"),Hi=(n,r)=>{Fi.selectAll("svg").remove();const s=Fi.node().clientWidth-100,u=300,l=Fi.append("svg").attr("viewBox",`0 0 ${s} ${u}`).attr("width",s).attr("height",u),o=_r(n).sum(p=>p.value).sort((p,y)=>y.value-p.value);Ld().size([s,u]).padding(1)(o);const h=X("body").append("div").attr("class","tooltip"),_=Xn(r==="plant"?["#dfe3a0","#c5cb52","#888d2a","#3c3e13"]:["#dfddf6","#cccaf0","#948edf","#6e66d4","#483ec9","#372fa5","#2a237e","#1d1856","#0f0d2e","#020206"]),v=l.selectAll("g").data(o.leaves()).enter().append("g").attr("transform",p=>`translate(${p.x0},${p.y0})`);v.append("rect").attr("width",p=>p.x1-p.x0).attr("height",p=>p.y1-p.y0).attr("fill",p=>_(p.data.name)).on("mouseover",(p,y)=>{const P=(y.value/o.value*100).toFixed(2);h.style("display","block").html(`<strong>${y.data.name}</strong><br>Value: ${y.value}<br>Percent: ${P}%`).style("left",`${p.pageX+10}px`).style("top",`${p.pageY+10}px`)}).on("mousemove",p=>{h.style("left",`${p.pageX+10}px`).style("top",`${p.pageY+10}px`)}).on("mouseout",()=>{h.style("display","none")});const g=o.leaves().filter(p=>p.value/o.value>=.08);v.filter(p=>g.includes(p)).append("text").attr("dx",4).attr("dy",14).each(function(p){const y=p.data.name.split(" ");y.length===2?(X(this).append("tspan").attr("x",0).attr("dy","1em").text(y[0]),X(this).append("tspan").attr("x",4).attr("dy","1em").text(y[1])):X(this).text(p.data.name)})},Fd=async()=>{try{return await Vs("data/species_edited.csv")}catch(n){console.error("Error loading species data",n)}},Hd=async()=>{try{return await Vs("data/parks.csv")}catch(n){console.error("Error loading parks data",n)}},Gd=async()=>{try{return await Zf("data/parks.geojson")}catch(n){console.error("Error loading park geojson",n)}},nn=await Fd(),ee=await Gd(),na=await Hd(),$d=Un(na,n=>n["Park Name"]),Ud=n=>$d.get(n)[0]["Park Code"],Wd="Mammal",Vd="Bird",qd="Reptile",jd="Amphibian",Xd="Fish",Yd="Vascular Plant",Kd="Spider/Scorpion",Jd="Insect",Qd="Invertebrate",t_="Fungi",e_="Nonvascular Plant",n_="Crab/Lobster/Shrimp",i_="Slug/Snail",r_="Algae",Pe=[Yd,t_,e_,r_],Qe=[Wd,Vd,qd,jd,Xd,Kd,Jd,Qd,n_,i_];ye(nn,n=>n.length,n=>n.Abundance);const o_=Un(nn,n=>n["Park Name"],n=>n.Abundance),ia="Native",ra="Not Native",s_="Abundant",pr=ye(nn,n=>n.length,n=>n["Park Name"]),[M_,a_]=ve(pr.values());ee.features.forEach(n=>{const r=n.properties["Park Name"],s=pr.get(r),u=s/a_;n.properties.speciesCount=s,n.properties.relativeTotalSpecies=u;const l=o_.get(r),o=[];l.forEach((d,_)=>{_===s_&&o.push(...d)});const h=o.filter(d=>Qe.includes(d.Category)),f=o.filter(d=>Pe.includes(d.Category));n.properties.abundantAnimals=h,n.properties.abundantPlants=f});const oa=Un(nn,n=>Pe.includes(n.Category),n=>n["Park Name"]),mr=oa.get(!0),sa=[];mr.forEach((n,r)=>{const s=n.length,u=ye(n,g=>g.length,g=>g.Nativeness),l=u.get(ia)||0,o=u.get(ra)||0,h=s-l-o,f=l/s,d=Ud(r),_=ye(n,g=>g.length,g=>g.Category),v=Array.from(_,([g,p])=>({name:g,value:p}));return sa.push({park:r,totalSpecies:s,nativeBreakdown:{totalNative:l,totalNonNative:o,totalUknownNative:h},percentNative:f,parkCode:d,plantCategory:v})});const Yn=sa.sort((n,r)=>r.totalSpecies-n.totalSpecies),gr=oa.get(!1),aa=[];gr.forEach((n,r)=>{const s=n.length,u=ye(n,v=>v.length,v=>v.Nativeness),l=u.get(ia)||0,o=u.get(ra)||0,h=s-l-o,f=l/s,d=ye(n,v=>v.length,v=>v.Category),_=Array.from(d,([v,g])=>({name:v,value:g}));return aa.push({park:r,totalSpecies:s,nativeBreakdown:{totalNative:l,totalNonNative:o,totalUknownNative:h},percentNative:f,animalCategory:_})});const vr=aa.sort((n,r)=>r.totalSpecies-n.totalSpecies),ha=[];mr.values().forEach(n=>{ha.push(n.length)});const ua=[];gr.values().forEach(n=>{ua.push(n.length)});ve(ha);ve(ua);const yr=[];pr.forEach((n,r)=>{const s=mr.get(r).length,u=gr.get(r).length;yr.push({park:r,total:n,"Total Plants":s,"Total Animals":u,categories:["Total Plants","Total Animals"]})});const wr=Un(nn,n=>n["Park Name"],n=>n["Conservation Status"]),h_="Species of Concern",u_="Threatened",l_="Endangered",c_="In Recovery",f_="Under Review",d_="Proposed Threatened",Gi=[h_,u_,l_,c_,f_,d_],la=[];wr.forEach((n,r)=>{const s={park:r,categories:Gi};let u=0;n.forEach((h,f)=>{s[f]=h.length,Gi.includes(f)&&(u+=h.length)}),s.total=u;const l=Object.keys(s);Gi.filter(h=>!l.includes(h)).forEach(h=>{s[h]=0}),la.push(s)});const ca=[];vr.forEach(n=>{const r={park:n.park,categories:Qe,total:n.totalSpecies};n.animalCategory.forEach(l=>{r[l.name]=l.value});const s=Object.keys(r);Qe.filter(l=>!s.includes(l)).forEach(l=>{r[l]=0}),ca.push(r)});const xr=[];Yn.forEach(n=>{const r={park:n.park,categories:Pe,total:n.totalSpecies};n.plantCategory.forEach(l=>{r[l.name]=l.value});const s=Object.keys(r);Pe.filter(l=>!s.includes(l)).forEach(l=>{r[l]=0}),xr.push(r)});console.log(xr);wr.forEach((n,r)=>{const s=[],u=[];n.forEach((l,o)=>{if(o.length){const h=l.filter(d=>Qe.includes(d.Category));s.push({name:o,value:h.length});const f=l.filter(d=>Pe.includes(d.Category));u.push({name:o,value:f.length})}})});const __=new Map,p_=new Map;wr.forEach((n,r)=>{const s=[],u=[];n.forEach((l,o)=>{if(o.length){const h=l.filter(d=>Qe.includes(d.Category)),f=l.filter(d=>Pe.includes(d.Category));s.push({[o]:h}),u.push({[o]:f})}}),__.set(r,s),p_.set(r,u)});const Lr=new Map,Pr=new Map;vr.forEach(n=>{const r={name:n.park,children:n.animalCategory.map(s=>({name:s.name,value:s.value}))};Pr.set(n.park,r)});Yn.forEach(n=>{const r={name:n.park,children:n.plantCategory.map(s=>({name:s.name,value:s.value}))};Lr.set(n.park,r)});const m_=new Map;na.forEach(n=>{const r=n["Park Name"],s={name:r,children:[{name:"Plants",children:Lr.get(r).children},{name:"Animals",children:Pr.get(r).children}]};m_.set(r,s)});const g_=async()=>{const n=X("#map"),r=X("#map-park-name"),s="Click on a park to learn more about its biodiversity";r.text(s);const u=X("#map-acres"),l=X("#map-species"),o=X("#treemap_title"),h=X("#park_info"),f=X("#animals_button_treemap"),d=X("#plants_button_treemap"),_=X("#park_info_x"),v=[45,-110],g=3,p=g,y=10,P=L.map(n.node()).setView(v,g);var C=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{minZoom:p,maxZoom:y});C.addTo(P);const M=Bd([0,Vi(ee.features,Q=>Q.properties.Acres)],[2,20]),O=Je().domain(ve(ee.features,Q=>Q.properties.speciesCount)).range(["#e49373","#4a1f0e"]).interpolate(Ye),Y=X("body").append("div").attr("class","tooltip"),N=L.layerGroup();let V=null;for(const Q of ee.features){const{speciesCount:E,Acres:R}=Q.properties,G=Q.properties["Park Name"],W=L.circleMarker([Q.geometry.coordinates[1],Q.geometry.coordinates[0]],{color:O(E),radius:M(R)});W.on("click",()=>{_.classed("hidden",!1),h.classed("park_info_open",!0),h.classed("park_info_closed",!1),r.text(G),u.text(`Acres: ${Xt(R)}`),l.text(`Total species: ${Xt(E)}`);const dt=Pr.get(G);Hi(dt,"animal");const nt=Lr.get(G),tt=dt.children.reduce((et,q)=>et+q.value,0),z=nt.children.reduce((et,q)=>et+q.value,0),_t=`Animal species: ${Xt(tt)}`,Z=`Plant species: ${Xt(z)}`;let K=_t;const ct=()=>{f.style("display","block").classed("animalButtonSelected",!0).classed("animalButtonNotSelected",!1),d.style("display","block").classed("plantButtonNotSelected",!0).classed("plantButtonSelected",!1),Hi(dt,"animal"),K=_t,o.text(K)},ft=()=>{f.style("display","block").classed("animalButtonNotSelected",!0).classed("animalButtonSelected",!1),d.style("display","block").classed("plantButtonSelected",!0).classed("plantButtonNotSelected",!1),Hi(nt,"plant"),K=Z,o.text(K)};o.text(K),f.style("display","block").classed("animalButtonSelected",!0).classed("animalButtonNotSelected",!1).on("click",ct),d.style("display","block").classed("plantButtonNotSelected",!0).classed("plantButtonSelected",!1).on("click",ft),V&&V.getElement().classList.remove("park-selected"),W.getElement().classList.add("park-selected"),V=W,_.on("click",()=>{_.classed("hidden",!0),u.text(""),l.text(""),o.text(""),f.style("display","none"),d.style("display","none"),h.selectAll("svg").remove(),h.classed("park_info_closed",!0),h.classed("park_info_open",!1),r.text(s),V&&V.getElement().classList.remove("park-selected")})}),W.on("mouseover",dt=>{Y.style("display","block").text(`${G}`).style("left",`${dt.originalEvent.pageX+10}px`).style("top",`${dt.originalEvent.pageY}px`)}),W.on("mouseout",()=>{Y.style("display","none")}),N.addLayer(W)}N.addTo(P);const rt=L.control({position:"bottomleft"});rt.onAdd=function(Q){const E=L.DomUtil.create("div","info legend"),R=ve(ee.features,W=>W.properties.speciesCount),G=[];E.innerHTML+="<strong>Species Count</strong><br>";for(let W=R[0];W<=R[1];W+=(R[1]-R[0])/4)G.push('<i style="background:'+O(W)+'; width: 18px; height: 18px; display: inline-block;"></i> '+Xt(Math.round(W)));return E.innerHTML+=G.join("<br>"),E},rt.addTo(P);const ht=L.control({position:"bottomleft"});ht.onAdd=function(Q){const E=L.DomUtil.create("div","info legend"),R=Kh(ee.features,tt=>tt.properties.Acres),G=Vi(ee.features,tt=>tt.properties.Acres),W=(R+G)/2,dt=[R,W,G].map(M),nt=[R,W,G].map(tt=>`${Math.round(tt)}`);E.innerHTML+="<strong>Acres</strong><br>";for(let tt=0;tt<dt.length;tt++)E.innerHTML+='<div style="display: flex; align-items: center; justify-content: center; margin-bottom: 5px;"><i style="width: '+dt[tt]*2+"px; height: "+dt[tt]*2+'px; border-radius: 50%; border: 2px solid black; margin-right: 5px;"></i> '+Xt(nt[tt])+"</div>";return E},ht.addTo(P),L.Control.ResetButton=L.Control.extend({options:{position:"topleft"},onAdd:function(Q){const E=Fl("div").attr("class","leaflet-bar leaflet-control"),R=E.append("a").attr("class","leaflet-control-button").attr("role","button").style("cursor","pointer");return R.append("img").attr("src","../assets/refresh-icon.svg").style("transform","scale(0.5)"),R.on("click",G=>{G.preventDefault(),G.stopPropagation(),Q.setView(v,g)}),E.node()},onRemove:function(Q){}}),new L.Control.ResetButton().addTo(P)},br=X("#bar-chart"),qe=br.node().clientWidth,me=br.node().clientHeight,zt={top:100,right:20,bottom:160,left:100},Tn=br.append("svg").attr("viewBox",`0 0 ${qe} ${me}`).attr("width",qe).attr("height",me),Cr=n=>{Tn.selectAll("*").remove();const r=Tn.append("g").attr("class","axes"),s=Tn.append("g").attr("class","bars"),u=n[0].categories,l=Xn().domain(u).range(Dd),o=Zd().keys(u)(n),h=Ys().domain(n.map(p=>p.park)).range([0+zt.left,qe-zt.right]).paddingInner(.25).paddingOuter(.1),[f,d]=ve(n.map(p=>p.total)),_=Je().domain([d,0]).range([zt.top,me-zt.bottom]).nice();r.append("g").attr("transform",`translate(${zt.left} 0)`),r.append("g").data(o).attr("transform",`translate(0 ${me-zt.bottom})`).call(vs(h)).selectAll("text").attr("transform","rotate(-60)").style("text-anchor","end").attr("dx","-1.5em").attr("dy","0.5em").text(p=>Rd(p)),r.append("g").data(o).attr("transform",`translate(${zt.left}, 0)`).call(ys(_)),r.append("text").attr("class","x-axis-title").attr("text-anchor","middle").attr("x",qe/2).attr("y",me-zt.bottom/2+60).text("Parks"),r.append("text").attr("class","y-axis-title").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-me/2).attr("y",zt.left/2-10).text("Total Species");const v=X("body").append("div").attr("class","tooltip");s.selectAll("g").data(o).enter().append("g").attr("fill",p=>l(p.key)).selectAll("rect").data(p=>p).enter().append("rect").attr("x",p=>h(p.data.park)).attr("y",p=>_(p[1])).attr("height",p=>_(p[0])-_(p[1])).attr("width",h.bandwidth()).on("mouseover",(p,y)=>{const P=X(p.target.parentNode).datum().key;v.style("display","block").html(`${y.data.park}<br>
					${P}: ${Xt(y[1]-y[0])}
					`).style("left",`${p.pageX+10}px`).style("top",`${p.pageY+10}px`)}).on("mousemove",p=>{v.style("left",`${p.pageX+10}px`).style("top",`${p.pageY+10}px`)}).on("mouseout",()=>{v.style("display","none")});const g=Tn.append("g").attr("transform",`translate(${qe-200}, ${zt.top-80})`);u.forEach((p,y)=>{const P=g.append("g").attr("transform",`translate(0, ${y*20})`);P.append("rect").attr("width",10).attr("height",10).attr("fill",l(p)),P.append("text").attr("x",15).attr("y",10).attr("text-anchor","start").text(p)})},$n=X("#scatterplot"),Sn=$n.node().clientWidth,pe=$n.node().clientHeight,jt={top:100,right:100,bottom:100,left:100},kr=(n,r)=>{const s=r==="plant"?nr:ir,u=r==="plant"?ir:nr;$n.selectAll("svg").remove();const l=$n.append("svg").attr("viewBox",`0 0 ${Sn} ${pe}`).attr("width",Sn).attr("height",pe),o=l.append("g").attr("class","axes"),h=l.append("g").attr("class","circlePlots"),f=Je().domain([0,Vi(n,v=>v.totalSpecies)]).range([jt.left,Sn-jt.right]),d=Je().domain([0,100]).range([pe-jt.bottom,jt.top]);o.append("g").attr("transform",`translate(0, ${pe-jt.bottom})`).call(vs(f)),o.append("g").attr("transform",`translate(${jt.left}, 0)`).call(ys(d)),o.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",Sn/2).attr("y",pe-jt.bottom/2).text(`Total ${r==="plant"?"Plant":"Animal"} Species`),o.append("text").attr("class","y-axis-label").attr("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-pe/2).attr("y",jt.left/2).text("Percent of Species that are Native");const _=X("body").append("div").attr("class","tooltip");h.selectAll("text").data(n).enter().append("circle").attr("cx",v=>f(v.totalSpecies)).attr("cy",v=>d(v.percentNative*100)).attr("r",5).attr("fill",s).on("mouseover",(v,g)=>{_.style("display","block").html(`${g.park}<br>
                    ${r==="plant"?"Plant":"Animal"} species: ${Xt(g.totalSpecies)}<br>
                    Percent native: ${parseFloat(g.percentNative.toFixed(2))*100}%
                    `).style("left",`${v.pageX+10}px`).style("top",`${v.pageY+10}px`),X(v.target).attr("fill",u)}).on("mouseout",(v,g)=>{_.style("display","none"),X(v.target).attr("fill",s)})},v_=X("#down_arrow-intro"),y_=document.getElementById("map-section");v_.on("click",()=>{y_.scrollIntoView({behavior:"smooth"})});const w_=X("#down_arrow"),x_=document.getElementById("native-scattter-section");w_.on("click",()=>{x_.scrollIntoView({behavior:"smooth"})});const L_=X("#down_arrow_scatter"),P_=document.getElementById("bar-section");L_.on("click",()=>{P_.scrollIntoView({behavior:"smooth"})});const Kn=X("#plants_button"),Jn=X("#animals_button");kr(Yn,"plant");Jn.style("display","block").classed("animalButtonNotSelected",!0).classed("animalButtonSelected",!1);Kn.style("display","block").classed("plantButtonSelected",!0).classed("plantButtonNotSelected",!1);const b_=()=>{kr(Yn,"plant"),Jn.style("display","block").classed("animalButtonNotSelected",!0).classed("animalButtonSelected",!1),Kn.style("display","block").classed("plantButtonSelected",!0).classed("plantButtonNotSelected",!1)},C_=()=>{kr(vr,"animal"),Jn.style("display","block").classed("animalButtonSelected",!0).classed("animalButtonNotSelected",!1),Kn.style("display","block").classed("plantButtonNotSelected",!0).classed("plantButtonSelected",!1)};Kn.on("click",b_);Jn.on("click",C_);let kt=yr;const k_=X("#bar-chart-select"),fa=X("#bar-chart-sort"),da=(n,r)=>r==="park"?n.sort((s,u)=>Ve(s.park,u.park)):n.sort((s,u)=>u.total-s.total);k_.on("change",function(){const n=fa.property("value"),r=X(this).property("value");r==="all"?kt=yr:r==="endangered"?kt=la:r==="animals"?kt=ca:r==="plants"&&(kt=xr),kt=da(kt,n),Cr(kt)});fa.on("change",function(){const n=X(this).property("value");kt=da(kt,n),Cr(kt)});await g_();Cr(kt);
